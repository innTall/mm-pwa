import{d as J,r as x,c as q,k as T,s as K,o as _,a as $,b as e,h as j,g as f,i as m,u as o,l as I,t as u,F as M,e as L,f as Q,j as W,_ as Z}from"./index-Cv8oVwkU.js";const z=J("spotBybit",()=>{const g=x(5100),B=x(.02),O=x(1.2);let U=1;const p=x(!1),F=x(""),a=x(null),w=q(()=>Number(g.value*B.value).toFixed(2)),y=x([h()]);function A(){return U++}function h(){const t=A(),r=T({id:t,symbol:"",start:"",end:"",orders:[],isSaved:!1,summary:q(()=>C(r))}),i=R(1);return r.orders.push(i),r}function P(t){return t>=1e4?0:t>=1e3?1:t>=100||t>=10?2:t>=1?3:t>=.1?4:5}function S(t){if(t===0)return 4;if(t===1)return 3;if(t===2)return 2;if(t===3)return 1;if(t>=4)return 0}function C(t){const r=t.orders.reduce((v,b)=>v+(b.amount||0),0),i=t.orders.reduce((v,b)=>v+(b.buyOrder||0),0),c=t.orders.reduce((v,b)=>v+(b.sellOrder||0),0),k=t.orders.reduce((v,b)=>v+(b.profit||0),0),N=P(i/r||0),G=P(c/r||0),H=S(N);return{avgBuyPrice:r?Number((i/r).toFixed(N)):0,avgSellPrice:r?Number((c/r).toFixed(G)):0,totalProfit:Number(k.toFixed(2)),totalBuyOrders:Number(i.toFixed(2)),totalAmount:Number(r.toFixed(H))}}function V(t){return t===1?+w.value:+w.value*Math.pow(O.value,t-1)}function D(t){const r=+t.buyPrice||1,i=+t.sellPrice||null,c=1+.001,k=P(r),N=S(k);t.buyOrder=+(V(t.id)*c).toFixed(2),t.amount=+(t.buyOrder/r).toFixed(N),t.sellOrder=i?+(i*t.amount*(1-.001)).toFixed(2):0,t.profit=+(t.sellOrder-t.buyOrder).toFixed(2)}function R(t){return T({id:t,buyPrice:null,sellPrice:null,amount:0,buyOrder:+(V(t)*1.001).toFixed(2),sellOrder:0,profit:0,isManualBuyOrder:!1})}function n(t){const r=t.orders.length+1,i=R(r);t.orders.push(i)}function l(){const t=h();y.value.unshift(t)}function s(t){F.value="Delete this block?",a.value=()=>{y.value=y.value.filter(r=>r.id!==t)},p.value=!0}function d(t,r){F.value="Delete this order?",a.value=()=>{const i=y.value.find(c=>c.id===t);i&&(i.orders=i.orders.filter(c=>c.id!==r))},p.value=!0}function E(){a.value&&(a.value(),a.value=null),p.value=!1}function Y(){p.value=!1,a.value=null}return{deposit:g,coefRisk:B,firstBuyOrder:w,coefNextBuyOrder:O,activeBlocks:y,showConfirmDialog:p,confirmMessage:F,addBlock:l,addOrder:n,removeBlock:s,removeOrder:d,confirmAction:E,cancelAction:Y,recalculateOrder:D,clearBuyPrice:t=>{t.buyPrice=null},clearSellPrice:t=>{t.sellPrice=null}}},{persist:!1}),ee={class:"flex justify-between text-center p-1 text-sm"},te={for:"deposit"},ne={for:"coefCost"},le={for:"coefRisk"},se={class:"mb-2"},re={class:"flex justify-between"},oe=["id","onUpdate:modelValue"],ie=["id","onUpdate:modelValue"],ue=["id","onUpdate:modelValue"],de=["id","onClick"],ae=["id","onClick"],ce={class:"flex justify-between"},fe=["id","onUpdate:modelValue","onInput","onFocus"],me=["id","onUpdate:modelValue","onInput","onFocus"],pe=["id","onClick"],ye={class:"flex justify-between mt-2 text-center"},ve={class:""},be={class:""},xe={class:""},ge={class:""},Be={class:""},Oe={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50"},we={class:"bg-gray-700 rounded-lg shadow-lg w-1/2 max-w-md p-2 text-center"},Pe={class:"text-sm text-white"},_e={class:"mt-2 flex justify-center space-x-4"},$e={class:"fixed w-full h-12 left-0 bottom-0 z-10 bg-gray-900"},Ce={__name:"SpotBybit",setup(X){const{deposit:g,coefRisk:B,coefNextBuyOrder:O,firstBuyOrder:U,activeBlocks:p,showConfirmDialog:F,confirmMessage:a}=K(z()),{addBlock:w,addOrder:y,removeBlock:A,removeOrder:h,confirmAction:P,cancelAction:S,recalculateOrder:C,clearBuyPrice:V,clearSellPrice:D}=z();return(R,n)=>(_(),$(M,null,[e("div",null,[e("div",ee,[e("div",null,[e("label",te,[n[6]||(n[6]=j("Deposit: ")),f(e("input",{id:"deposit",type:"number","onUpdate:modelValue":n[0]||(n[0]=l=>I(g)?g.value=l:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[m,o(g)]])])]),e("div",null,[e("label",ne,[n[7]||(n[7]=j("CoefCost: ")),f(e("input",{id:"coefCost",type:"number","onUpdate:modelValue":n[1]||(n[1]=l=>I(O)?O.value=l:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[m,o(O)]])])]),e("div",null,[e("label",le,[n[8]||(n[8]=j("CoefRisk: ")),f(e("input",{id:"coefRisk",type:"number","onUpdate:modelValue":n[2]||(n[2]=l=>I(B)?B.value=l:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[m,o(B)]])])]),e("div",null,"First Order: "+u(o(U)),1),e("button",{id:"addBlock",class:"h-8 px-2 border border-green-600 font-bold text-green-600",onClick:n[3]||(n[3]=(...l)=>o(w)&&o(w)(...l))},"ADD")]),n[20]||(n[20]=e("hr",{class:"border-green-600"},null,-1)),(_(!0),$(M,null,L(o(p),l=>(_(),$("div",{key:l.id,class:"p-2 text-sm"},[e("div",se,[e("div",re,[f(e("input",{id:`symbol-${l.id}`,type:"text","onUpdate:modelValue":s=>l.symbol=s,placeholder:"Symbol",class:"w-[8ch] bg-gray-900 border text-center border-green-600 text-green-400 uppercase"},null,8,oe),[[m,l.symbol]]),f(e("input",{id:`start-${l.id}`,type:"date","onUpdate:modelValue":s=>l.start=s,class:"w-[10ch] bg-gray-900 border text-center"},null,8,ie),[[m,l.start]]),f(e("input",{id:`end-${l.id}`,type:"date","onUpdate:modelValue":s=>l.end=s,class:"w-[10ch] bg-gray-900 border text-center"},null,8,ue),[[m,l.end]]),e("button",{id:`removeBlock-${l.id}`,onClick:s=>o(A)(l.id),class:"px-2 font-bold text-red-600 border border-red-600"},"X Block",8,de),e("button",{id:`addOrder-${l.id}`,onClick:s=>o(y)(l),class:"px-2 border border-green-600 font-extrabold text-green-600"},"+",8,ae)])]),(_(!0),$(M,null,L(l.orders,s=>(_(),$("div",{key:s.id,class:"mb-1"},[e("div",ce,[e("span",null,u(s.id),1),f(e("input",{id:`buyPrice-${l.id}-${s.id}`,type:"number","onUpdate:modelValue":d=>s.buyPrice=d,placeholder:"Buy Price",class:"w-[6ch] bg-gray-900 text-center text-yellow-400",onInput:d=>o(C)(s),onFocus:d=>o(V)(s)},null,40,fe),[[m,s.buyPrice,void 0,{number:!0}]]),e("span",null,u(s.amount),1),e("span",null,u(s.buyOrder),1),f(e("input",{id:`sellPrice-${l.id}-${s.id}`,type:"number","onUpdate:modelValue":d=>s.sellPrice=d,placeholder:"Sell Price",class:"w-[6ch] bg-gray-900 text-center text-yellow-400",onInput:d=>o(C)(s),onFocus:d=>o(D)(s)},null,40,me),[[m,s.sellPrice,void 0,{number:!0}]]),e("span",null,u(s.sellOrder),1),e("span",null,u(s.profit),1),e("button",{id:`removeOrder-${l.id} -${s.id}`,onClick:d=>o(h)(l.id,s.id),class:"px-2 border border-red-600 font-bold text-red-600"},"X",8,pe)])]))),128)),e("div",ye,[e("div",ve,[n[9]||(n[9]=e("span",null,"Sum, $:",-1)),n[10]||(n[10]=e("br",null,null,-1)),e("span",null,u(l.summary.totalBuyOrders),1)]),e("div",be,[n[11]||(n[11]=e("span",null,"Buy:",-1)),n[12]||(n[12]=e("br",null,null,-1)),e("span",null,u(l.summary.avgBuyPrice),1)]),e("div",xe,[n[13]||(n[13]=e("span",null,"Amount:",-1)),n[14]||(n[14]=e("br",null,null,-1)),e("span",null,u(l.summary.totalAmount),1)]),e("div",ge,[n[15]||(n[15]=e("span",null,"Sell:",-1)),n[16]||(n[16]=e("br",null,null,-1)),e("span",null,u(l.summary.avgSellPrice),1)]),e("div",Be,[n[17]||(n[17]=e("span",null,"TP:",-1)),n[18]||(n[18]=e("br",null,null,-1)),e("span",null,u(l.summary.totalProfit),1)])]),n[19]||(n[19]=e("hr",{class:"border-green-600 mt-2"},null,-1))]))),128)),o(F)?(_(),$("div",Oe,[e("div",we,[e("p",Pe,u(o(a)),1),e("div",_e,[e("button",{onClick:n[4]||(n[4]=(...l)=>o(P)&&o(P)(...l)),class:"bg-green-600 hover:bg-green-400 text-white px-4 py-2 rounded transition"}," Yes "),e("button",{onClick:n[5]||(n[5]=(...l)=>o(S)&&o(S)(...l)),class:"bg-red-600 hover:bg-red-400 text-white px-4 py-2 rounded transition"}," No ")])])])):Q("",!0)]),e("footer",$e,[W(Z)])],64))}};export{Ce as default};
