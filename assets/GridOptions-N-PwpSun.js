import{r as c,c as F,l as D,o as a,a as p,b as e,i as w,h as d,j as u,t as o,F as b,f as x}from"./index-CZmMpsl9.js";const j={class:"flex justify-between text-center p-1 text-sm"},R={for:"deposit"},T={for:"coefCost"},N={for:"coefRisk"},q={class:"mb-2"},I={class:"flex justify-between"},X=["id","onDblclick","onUpdate:modelValue"],E=["id","onUpdate:modelValue"],G=["id","onUpdate:modelValue"],L=["id","onClick"],M={class:"flex justify-between"},z=["id","onUpdate:modelValue","onInput"],H=["id","onUpdate:modelValue","onInput"],J=["id","onClick"],K={class:"flex justify-between mt-2"},Q={class:""},W={class:""},Y={class:""},Z={class:""},k=["id","onClick"],ee={class:"mb-2"},te={class:"flex justify-between"},le=["onUpdate:modelValue","onDblclick"],se=["onUpdate:modelValue"],ne=["onUpdate:modelValue"],ie=["onClick"],oe={class:"flex justify-between"},de={class:"flex justify-between mt-4"},ue={class:""},re={class:""},ae={class:""},pe={class:""},ve=["onClick"],ye=.001,fe={__name:"GridOptions",setup(me){const g=c(1700),O=c(.02),P=c(1.2),B=F(()=>+(g.value*O.value).toFixed(2)),r=c([V(1)]),v=c([]);function V(n){const t=D({id:n,symbol:"",open:"",close:"",orders:[],isSaved:!1,summary:F(()=>{const l=t.orders.reduce((y,m)=>y+m.tokenAmount,0),i=t.orders.reduce((y,m)=>y+m.buyOrder,0),h=t.orders.reduce((y,m)=>y+m.sellOrder,0),A=t.orders.reduce((y,m)=>y+m.profit,0);return{avgBuyPrice:l?i/l:0,avgSellPrice:l?h/l:0,totalProfit:A,totalBuyOrders:i}})}),s={id:1,buyPrice:1.2345,sellPrice:1.456,tokenAmount:0,buyOrder:B.value,sellOrder:0,profit:0};return f(s,null),t.orders.push(s),t}function f(n,t){t?n.buyOrder=+(t.buyOrder*P.value).toFixed(2):n.buyOrder=+B.value.toFixed(2),n.tokenAmount=+(n.buyOrder/n.buyPrice).toFixed(2),n.sellOrder=+(n.sellPrice*n.tokenAmount*(1-ye)).toFixed(2),n.profit=+(n.sellOrder-n.buyOrder).toFixed(2)}function U(){const n=V(r.value.length+v.value.length+1);r.value.unshift(n)}function C(n){const t=n.orders[n.orders.length-1],s=+(t.buyPrice-.1).toFixed(4),l={id:n.orders.length+1,buyPrice:s,sellPrice:+(s+.2).toFixed(4),tokenAmount:0,buyOrder:0,sellOrder:0,profit:0};f(l,t),n.orders.push(l)}function S(n){n.isSaved=!0,r.value=r.value.filter(t=>t.id!==n.id),v.value.push(n)}function $(n){n.isSaved=!n.isSaved,n.isSaved?(r.value=r.value.filter(t=>t.id!==n.id),v.value.push(n)):(v.value=v.value.filter(t=>t.id!==n.id),r.value.push(n))}function _(n,t){t?v.value=v.value.filter(s=>s.id!==n):r.value=r.value.filter(s=>s.id!==n)}return(n,t)=>(a(),p("div",null,[e("div",j,[e("div",null,[e("label",R,[t[3]||(t[3]=w("Deposit: ")),d(e("input",{id:"deposit",type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>g.value=s),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[u,g.value]])])]),e("div",null,[e("label",T,[t[4]||(t[4]=w("CoefCost: ")),d(e("input",{id:"coefCost",type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>P.value=s),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[u,P.value]])])]),e("div",null,[e("label",N,[t[5]||(t[5]=w("CoefRisk: ")),d(e("input",{id:"coefRisk",type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>O.value=s),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[u,O.value]])])]),e("div",null,"First Order: "+o(B.value),1),e("button",{id:"addBlock",class:"border px-1 bg-gray-700",onClick:U},"ADD")]),t[22]||(t[22]=e("hr",{class:"border-green-600 mt-2"},null,-1)),(a(!0),p(b,null,x(r.value,s=>(a(),p("div",{key:s.id,class:"p-2 mt-2"},[e("div",q,[e("div",I,[d(e("input",{id:`symbol-${s.id}`,type:"text",onDblclick:l=>$(s),"onUpdate:modelValue":l=>s.symbol=l,placeholder:"Symbol",class:"w-[8ch] bg-gray-900 border text-center"},null,40,X),[[u,s.symbol]]),d(e("input",{id:`open-${s.id}`,type:"date","onUpdate:modelValue":l=>s.open=l,class:"w-[10ch] bg-gray-900 border text-center"},null,8,E),[[u,s.open]]),d(e("input",{id:`close-${s.id}`,type:"date","onUpdate:modelValue":l=>s.close=l,class:"w-[10ch] bg-gray-900 border text-center"},null,8,G),[[u,s.close]]),e("button",{id:`saveBlock-${s.id}`,onClick:l=>S(s),class:"border px-1 bg-gray-700"},"Save",8,L)])]),(a(!0),p(b,null,x(s.orders,l=>(a(),p("div",{key:l.id,class:"mb-1"},[e("div",M,[e("span",null,o(l.id),1),d(e("input",{id:`buyPrice-${s.id}-${l.id}`,type:"number","onUpdate:modelValue":i=>l.buyPrice=i,placeholder:"Buy Price",class:"w-[6ch] bg-gray-900 text-center",onInput:i=>f(l)},null,40,z),[[u,l.buyPrice]]),e("span",null,o(l.tokenAmount),1),e("span",null,o(l.buyOrder),1),d(e("input",{id:`sellPrice-${s.id}-${l.id}`,type:"number","onUpdate:modelValue":i=>l.sellPrice=i,placeholder:"Sell Price",class:"w-[6ch] bg-gray-900 text-center",onInput:i=>f(l)},null,40,H),[[u,l.sellPrice]]),e("span",null,o(l.sellOrder),1),e("span",null,o(l.profit),1),e("button",{id:`addOrder-${s.id}`,onClick:i=>C(s),class:"border px-1 bg-gray-700"},"Add Order",8,J)])]))),128)),e("div",K,[e("div",Q,[t[6]||(t[6]=e("span",null,"Sum, $:",-1)),t[7]||(t[7]=e("br",null,null,-1)),e("span",null,o(s.summary.totalBuyOrders.toFixed(2)),1)]),e("div",W,[t[8]||(t[8]=e("span",null,"Buy:",-1)),t[9]||(t[9]=e("br",null,null,-1)),e("span",null,o(s.summary.avgBuyPrice.toFixed(4)),1)]),e("div",Y,[t[10]||(t[10]=e("span",null,"Sell:",-1)),t[11]||(t[11]=e("br",null,null,-1)),e("span",null,o(s.summary.avgSellPrice.toFixed(4)),1)]),e("div",Z,[t[12]||(t[12]=e("span",null,"TP:",-1)),t[13]||(t[13]=e("br",null,null,-1)),e("span",null,o(s.summary.totalProfit.toFixed(2)),1)]),e("button",{id:`removeBlock-${s.id}`,onClick:l=>_(s.id,!1),class:"border px-1 bg-gray-700"},"X Block",8,k)]),(a(!0),p(b,null,x(v.value,l=>(a(),p("div",{key:l.id,class:"border border-green-600 p-2 mt-4"},[e("div",ee,[e("div",te,[d(e("input",{id:"symbol",type:"text","onUpdate:modelValue":i=>l.symbol=i,placeholder:"Symbol",class:"w-[8ch] bg-gray-900 border border-green-400 text-green-600 font-bold text-center",onDblclick:i=>$(l),readonly:""},null,40,le),[[u,l.symbol]]),d(e("input",{id:"open",type:"date","onUpdate:modelValue":i=>l.open=i,class:"w-[10ch] bg-gray-900 border text-center",disabled:""},null,8,se),[[u,l.open]]),d(e("input",{id:"close",type:"date","onUpdate:modelValue":i=>l.close=i,class:"w-[10ch] bg-gray-900 border text-center",disabled:""},null,8,ne),[[u,l.close]]),e("button",{id:"removeBlock",onClick:i=>_(l.id,!0),class:"border"},"Remove",8,ie)])]),(a(!0),p(b,null,x(l.orders,i=>(a(),p("div",{key:i.id,class:"mb-1"},[e("div",oe,[e("span",null,o(i.id),1),e("span",null,o(i.buyPrice),1),e("span",null,o(i.tokenAmount),1),e("span",null,o(i.buyOrder),1),e("span",null,o(i.sellPrice),1),e("span",null,o(i.sellOrder),1),e("span",null,o(i.profit),1)])]))),128)),e("div",de,[e("div",ue,[t[14]||(t[14]=e("span",null,"Sum, $:",-1)),t[15]||(t[15]=e("br",null,null,-1)),e("span",null,o(l.summary.totalBuyOrders.toFixed(2)),1)]),e("div",re,[t[16]||(t[16]=e("span",null,"Buy:",-1)),t[17]||(t[17]=e("br",null,null,-1)),e("span",null,o(l.summary.avgBuyPrice.toFixed(4)),1)]),e("div",ae,[t[18]||(t[18]=e("span",null,"Sell:",-1)),t[19]||(t[19]=e("br",null,null,-1)),e("span",null,o(l.summary.avgSellPrice.toFixed(4)),1)]),e("div",pe,[t[20]||(t[20]=e("span",null,"TP:",-1)),t[21]||(t[21]=e("br",null,null,-1)),e("span",null,o(l.summary.totalProfit.toFixed(2)),1)]),e("button",{id:"removeBlock",onClick:i=>_(l.id,!1),class:"border"},"X Block",8,ve)])]))),128))]))),128))]))}};export{fe as default};
