import{d as ee,r as f,l as te,c as g,w as se,s as ne,o as v,a as y,b as t,h as d,j as c,u as o,m as C,t as a,n as x,F as I,f as H,g as le,v as W,k as ie}from"./index-gJWCLn0d.js";import{_ as oe}from"./FooterBitget-DEonfamk.js";const Z=ee("marginBitget",()=>{let F=1;const p=f(5100),V=f(10),B=f(5),R=f(20),U=f(5),h=f(2),w=f(null),r=f([L()]),A=f([]),P=g(()=>(p.value*B.value/100).toFixed(2)),q=g(()=>(p.value*U.value/100).toFixed(2)),D=g(()=>(p.value*h.value/100).toFixed(2)),N=g(()=>(V.value*P.value).toFixed(2)),z=g(()=>r.value.reduce((e,i)=>e+i.orders.reduce((s,n)=>(n.selectedSwitch==="tp"&&n.tp?s+=parseFloat(n.tp)||0:n.selectedSwitch==="sl"&&n.sl&&(s+=parseFloat(n.sl)||0),s),0),0).toFixed(2)),G=g(()=>[...A.value].sort((e,i)=>e.localeCompare(i)));function X(){return F++}function O(){A.value=r.value.filter(e=>e.symbol).map(e=>e.symbol)}function L(){const e=te({id:X(),symbol:"",date:"",orders:[],isSaved:!1,totalActiveTpAndSl:g(()=>e.orders.reduce((s,n)=>(n.selectedSwitch==="tp"&&n.tp?s+=parseFloat(n.tp)||0:n.selectedSwitch==="sl"&&n.sl&&(s+=parseFloat(n.sl)||0),s),0).toFixed(2))}),i={id:1,buyPrice:w.value,amount:null,slPrice:null,tpPrice:null,selectedSwitch:null};return e.orders.push(i),se(()=>e.symbol,()=>{O()}),e}function E(){const e=L();r.value.unshift(e),O()}function M(e){r.value=r.value.filter(i=>i.id!==e),O()}function $(e){const i={id:e.orders.length+1,buyPrice:w.value,amount:null,buyOrder:null,amountMath:null,slPrice:null,sl:null,slPriceMath:null,tpPrice:null,tp:null,tpPriceMath:null,selectedSwitch:"sl"};e.orders.push(i);const s=r.value.findIndex(n=>n.id===e.id);if(s!==-1){const[n]=r.value.splice(s,1);r.value.unshift(n)}}function m(e,i){const s=e.orders.findIndex(n=>n.id===i);s!==-1&&e.orders.splice(s,1)}function T(e){return!e.buyPrice||!e.amount?0:(e.buyPrice*e.amount).toFixed(2)}function Y(e){const i=parseFloat(e.slPrice);if(!i||!e.buyPrice||!e.amount)return 0;const n=T(e)*.1/100,l=i*e.amount*.1/100;return((i-e.buyPrice)*e.amount-n-l).toFixed(2)}function b(e){const i=parseFloat(e.tpPrice);if(!i||!e.buyPrice||!e.amount)return 0;const n=T(e)*.1/100,l=i*e.amount*.1/100;return((i-e.buyPrice)*e.amount-n-l).toFixed(2)}function _(e){return e>=1e4?0:e>=1e3?1:e>=100||e>=10?2:e>=1?3:e>=.1?4:5}function S(e){if(e===0)return 4;if(e===1)return 3;if(e===2)return 2;if(e===3)return 1;if(e>=4)return 0}return{deposit:p,leverage:V,coefRisk:B,coefCost:R,takeProfit:U,stopLoss:h,activeBlocks:r,activeSymbols:A,sortedSymbols:G,totalActiveTpAndSl:z,margin:P,tpCost:q,slCost:D,buyOrderMath:N,addBlock:E,removeBlock:M,addOrder:$,removeOrder:m,calculateBuyOrder:T,calculateSl:Y,calculateTp:b,infoAmount:e=>{if(!e.buyPrice||e.buyPrice<=0)return 0;const i=_(e.buyPrice),s=S(i),n=p.value*B.value/100;return+(V.value*n/e.buyPrice).toFixed(s)},infoSlPrice:e=>{if(!e.buyPrice||!e.amount||e.amount<=0)return null;const i=_(e.buyPrice);return+((p.value*h.value/100-e.buyPrice*e.amount)*-1/e.amount).toFixed(i)},infoTpPrice:e=>{if(!e.buyPrice||!e.amount||e.amount<=0)return null;const i=_(e.buyPrice);return+((p.value*U.value/100+e.buyPrice*e.amount)/e.amount).toFixed(i)}}},{persist:!0}),ae={class:"flex flex-col h-screen"},ue={class:"fixed w-full top-[12] z-10 px-2 bg-gray-900"},de={class:"flex justify-between text-sm"},re={class:""},ce={class:"flex justify-between"},pe={class:"flex justify-between"},fe={class:"flex justify-between"},me={class:""},ve={class:"flex justify-between"},ye={class:"flex justify-between"},xe={class:"flex justify-between"},ge={class:""},he={class:"text-right"},be={class:"text-right"},_e={class:"text-right"},we={class:"text-center"},Pe={class:""},Se={class:"flex gap-2 text-sm mb-1"},Ce={class:"flex"},Fe={class:"overflow-y-auto flex-grow pt-24 pb-12"},Ve={class:""},Be={class:"flex justify-between"},Ue=["id","onUpdate:modelValue"],Ae=["id","onUpdate:modelValue"],Oe={class:""},Te=["id","onClick"],je=["id","onClick"],De={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50"},Le={class:"bg-gray-700 rounded-lg shadow-lg w-1/2 max-w-md p-2 text-center"},Me={class:"text-sm text-white"},$e={class:"flex justify-between mt-1 items-center"},Ie=["id","onUpdate:modelValue"],Re=["id","onUpdate:modelValue"],qe={class:""},Ne={class:"text-gray-500 text-xs"},ze=["id","onClick"],Ge={class:"flex justify-between mt-1 mb-1 items-center"},Xe={class:"flex items-center"},Ee=["id","name","onUpdate:modelValue"],Ye=["id","onUpdate:modelValue","onInput"],He={class:"text-gray-500"},Je={class:"text-xs"},Ke={class:"flex items-center"},Qe=["id","name","onUpdate:modelValue"],We=["id","onUpdate:modelValue","onInput"],Ze={class:"text-gray-500"},ke={class:"text-xs"},et={class:"fixed w-full h-12 left-0 bottom-0 z-10 bg-gray-900"},nt={__name:"MarginBitget",setup(k){const{deposit:j,leverage:F,coefRisk:p,margin:V,tpCost:B,slCost:R,buyOrderMath:U,coefCost:h,takeProfit:w,stopLoss:r,activeBlocks:A,totalActiveTpAndSl:P,sortedSymbols:q}=ne(Z()),{addBlock:D,removeBlock:N,addOrder:z,removeOrder:G,calculateBuyOrder:X,infoAmount:O,infoSlPrice:L,infoTpPrice:E,calculateSl:M,calculateTp:$}=Z(),m=(i,s)=>i.selectedSwitch===s?s==="sl"?"text-red-500":"text-green-500":"text-white",T=g(()=>P.value>0?"text-green-500":P.value<0?"text-red-500":"text-white"),Y=i=>{const s=i.totalActiveTpAndSl;return s>0?"text-green-500":s<0?"text-red-500":"text-white"},b=f(!1),_=f("");let S=null;const J=i=>{_.value="Delete this block?",S=()=>N(i),b.value=!0},K=(i,s)=>{_.value="Delete this order?",S=()=>G(i,s),b.value=!0},Q=()=>{S&&S(),b.value=!1},e=()=>{b.value=!1};return(i,s)=>(v(),y(I,null,[t("div",ae,[t("div",ue,[t("div",de,[t("div",re,[t("div",ce,[s[7]||(s[7]=t("div",{class:""},"Deposit, $:",-1)),d(t("input",{id:"deposit",type:"number","onUpdate:modelValue":s[0]||(s[0]=n=>C(j)?j.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[c,o(j)]])]),t("div",pe,[s[8]||(s[8]=t("div",{class:""},"Leverage:",-1)),d(t("input",{id:"leverage",type:"number","onUpdate:modelValue":s[1]||(s[1]=n=>C(F)?F.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[c,o(F)]])]),t("div",fe,[s[9]||(s[9]=t("div",{class:""},"CoefCost, %:",-1)),d(t("input",{id:"coefCost",type:"number","onUpdate:modelValue":s[2]||(s[2]=n=>C(h)?h.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[c,o(h)]])])]),t("div",me,[t("div",ve,[s[10]||(s[10]=t("div",{class:""},"Margin:",-1)),d(t("input",{id:"coefRisk",type:"number","onUpdate:modelValue":s[3]||(s[3]=n=>C(p)?p.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[c,o(p)]])]),t("div",ye,[s[11]||(s[11]=t("div",{class:""},"TP:",-1)),d(t("input",{id:"takeProfit",type:"number","onUpdate:modelValue":s[4]||(s[4]=n=>C(w)?w.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[c,o(w)]])]),t("div",xe,[s[12]||(s[12]=t("div",{class:""},"SL:",-1)),d(t("input",{id:"stopLoss",type:"number","onUpdate:modelValue":s[5]||(s[5]=n=>C(r)?r.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[c,o(r)]])])]),t("div",ge,[t("div",he,a(o(V))+" $",1),t("div",be,a(o(B))+" $",1),t("div",_e,a(o(R))+" $",1)]),t("div",we,[t("button",{onClick:s[6]||(s[6]=(...n)=>o(D)&&o(D)(...n)),class:"px-2 border border-green-600 font-bold text-green-600"},"ADD"),s[13]||(s[13]=t("div",{class:""},"TP",-1)),t("div",{class:x(T.value)},a(o(P)),3)])]),s[16]||(s[16]=t("hr",{class:"border-green-600 mt-1"},null,-1)),t("div",Pe,[t("div",Se,[s[14]||(s[14]=t("div",{class:""},"Symbols:",-1)),t("ul",Ce,[(v(!0),y(I,null,H(o(q),n=>(v(),y("li",{key:n,class:"uppercase"},a(n)+" . ",1))),128))])]),s[15]||(s[15]=t("hr",{class:"border-green-600"},null,-1))])]),t("div",Fe,[(v(!0),y(I,null,H(o(A),n=>(v(),y("div",{key:n.id,class:"px-2 mt-2 text-sm"},[t("div",Ve,[t("div",Be,[d(t("input",{id:"symbol-"+n.id,type:"text","onUpdate:modelValue":l=>n.symbol=l,placeholder:"Symbol",class:"w-[10ch] px-2 text-center font-bold bg-gray-900 border uppercase"},null,8,Ue),[[c,n.symbol]]),d(t("input",{id:"date-"+n.id,type:"date","onUpdate:modelValue":l=>n.date=l,class:"w-[10ch] bg-gray-900 border text-center"},null,8,Ae),[[c,n.date]]),t("div",Oe,[t("span",{class:x(Y(n))},a(n.totalActiveTpAndSl),3)]),t("button",{id:"remove-block-"+n.id,onClick:l=>J(n.id),class:"px-2 font-bold text-red-600 border border-red-600"},"X Block",8,Te),t("button",{id:"add-order-"+n.id,onClick:l=>o(z)(n),class:"px-2 border border-green-600 font-extrabold text-green-600"}," + ",8,je),b.value?(v(),y("div",De,[t("div",Le,[t("p",Me,a(_.value),1),t("div",{class:"mt-2 flex justify-center space-x-4"},[t("button",{onClick:Q,class:"bg-green-600 hover:bg-green-400 text-white px-4 py-2 rounded transition"}," Yes "),t("button",{onClick:e,class:"bg-red-600 hover:bg-red-400 text-white px-4 py-2 rounded transition"}," No ")])])])):le("",!0)]),s[18]||(s[18]=t("hr",{class:"border-gray-600 mt-2 mb-1"},null,-1)),(v(!0),y(I,null,H(n.orders,l=>(v(),y("div",{key:l.id,class:""},[t("div",$e,[t("span",null,a(l.id),1),d(t("input",{id:"buyPrice-"+n.id+"-"+l.id,type:"number","onUpdate:modelValue":u=>l.buyPrice=u,placeholder:"Buy Price",class:"w-[6ch] bg-gray-900 text-center"},null,8,Ie),[[c,l.buyPrice]]),d(t("input",{id:"amount-"+n.id+"-"+l.id,type:"number","onUpdate:modelValue":u=>l.amount=u,placeholder:"Amount",class:"w-[6ch] bg-gray-900 text-center"},null,8,Re),[[c,l.amount]]),t("span",qe,a(o(X)(l)),1),t("div",Ne,[t("span",null,"("+a(o(O)(l))+" - ",1),t("span",null,a(o(U))+")",1)]),t("button",{id:"removeOrder-"+n.id+"-"+l.id,onClick:u=>K(n,l.id),class:"px-2 font-bold text-red-600 border border-red-600"},"X",8,ze)]),t("div",Ge,[t("div",Xe,[d(t("input",{id:"sl-"+n.id+"-"+l.id,type:"radio",name:"switchGroup"+l.id,"onUpdate:modelValue":u=>l.selectedSwitch=u,value:"sl",class:"accent-red-600"},null,8,Ee),[[W,l.selectedSwitch]]),t("span",{class:x(m(l,"sl"))},"SL",2)]),d(t("input",{id:"slPrice-"+n.id+"-"+l.id,type:"number","onUpdate:modelValue":u=>l.slPrice=u,onInput:u=>l.sl=o(M)(l),placeholder:"SLprice",class:x(["w-[6ch] bg-gray-900 text-center",m(l,"sl")])},null,42,Ye),[[c,l.slPrice]]),t("span",{class:x(m(l,"sl"))},a(o(M)(l)),3),t("div",He,[t("span",Je,"("+a(o(L)(l))+")",1)]),t("div",Ke,[d(t("input",{id:"tp-"+n.id+"-"+l.id,type:"radio",name:"switchGroup"+l.id,"onUpdate:modelValue":u=>l.selectedSwitch=u,value:"tp",class:"accent-green-600"},null,8,Qe),[[W,l.selectedSwitch]]),t("span",{class:x(m(l,"tp"))},"TP",2)]),d(t("input",{id:"tpPrice-"+n.id+"-"+l.id,type:"number","onUpdate:modelValue":u=>l.tpPrice=u,onInput:u=>l.tp=o($)(l),placeholder:"TPprice",class:x(["w-[6ch] bg-gray-900 text-center",m(l,"tp")])},null,42,We),[[c,l.tpPrice]]),t("span",{class:x(m(l,"tp"))},a(o($)(l)),3),t("div",Ze,[t("span",ke,"("+a(o(E)(l))+")",1)])]),s[17]||(s[17]=t("hr",{class:"border-gray-600"},null,-1))]))),128)),s[19]||(s[19]=t("hr",{class:"border-green-600"},null,-1))])]))),128))])]),t("footer",et,[ie(oe)])],64))}};export{nt as default};
