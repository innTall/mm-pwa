import{d as C,r as $,s as L,w as D,c as P,o as _,a as h,b as s,n as p,t as x,F as T,e as j,u as b,f as A,g as r,v as w,h as U,i as c,j as M}from"./index-CnYLW3HH.js";import{_ as O}from"./FooterBybit-ChHoUtkA.js";const N=C("marginStore",()=>{const f=$([{date:null,symbol:"",buy:null,amnt:null,tp:null,sl:null,activeValue:"set"}]),u=2e-4,m=55e-5,V=(n,d,i)=>Number(n*d*u+i*d*m).toFixed(2),g=(n,d,i)=>Number(n*d*u+i*d*m).toFixed(2);return{orderBlocks:f,T_P:(n,d,i)=>{const y=g(n,d,i);return Number((i-n)*d-y).toFixed(2)},S_L:(n,d,i)=>{const y=V(n,d,i);return Number((i-n)*d-y).toFixed(2)},addNewBlock:()=>{f.value.unshift({date:null,symbol:"",buy:null,amnt:null,tp:null,sl:null,activeValue:"set"})},removeBlock:n=>{f.value.splice(n,1)}}},{persist:!0}),R={class:"container min-h-screen mb-10 px-2 py-1 text-sm"},z={class:"flex justify-between border px-2 py-1"},E={class:"text-center font-bold"},I=["onDblclick"],X=["onClick"],Y={class:"container flex justify-between"},q={class:"text-yellow-400 font-bold"},G={class:"flex gap-3"},H={class:"flex gap-3"},J=["for"],K=["id","onUpdate:modelValue","disabled"],Q=["for"],W=["id","onUpdate:modelValue","disabled","onChange"],Z=["for"],k=["id","onUpdate:modelValue","disabled","onChange"],ee={class:"flex justify-between"},te=["id","onUpdate:modelValue","disabled"],ae=["id","onUpdate:modelValue","disabled"],se=["id","onUpdate:modelValue","disabled"],le=["id","onUpdate:modelValue","disabled"],ne=["id","onUpdate:modelValue","disabled"],oe=["id","onUpdate:modelValue","disabled"],de={class:"fixed w-full h-12 left-0 bottom-0 z-10 bg-gray-900"},ue={__name:"BybitMarginResult",setup(f){const{orderBlocks:u}=L(N()),{T_P:m,S_L:V,addNewBlock:g,removeBlock:B}=N(),v=l=>{l&&typeof l=="object"&&"value"in l?l.value="":l=""},F=$(!0);D(u,l=>{const t=l[0];t.date&&t.symbol&&t.buy&&t.amnt&&t.tp&&g()},{deep:!0});const S=()=>{F.value&&(g(),F.value=!1)},n=P(()=>!Array.isArray(u.value)||u.value.length===0?0:u.value.reduce((l,t)=>{if(t.activeValue==="profit"){const e=parseFloat(t.buy&&t.amnt&&t.tp?m(t.buy,t.amnt,t.tp):0);return l+e}else if(t.activeValue==="loss"){const e=parseFloat(t.buy&&t.amnt&&t.sl?V(t.buy,t.amnt,t.sl):0);return l+e}return l},0)),d=(l,t)=>{l.disabled=t},i=l=>{d(l,!0)},y=l=>{d(l,!1)};return(l,t)=>(_(),h(T,null,[s("div",R,[s("div",z,[t[6]||(t[6]=s("div",{class:""},"BYBIT Margin Order",-1)),s("div",E,[s("p",{class:p({"text-green-500 font-bold":n.value>0,"text-red-500 font-bold":n.value<0,"text-gray-500":n.value===0})}," Total: "+x(n.value.toFixed(2)),3)])]),(_(!0),h(T,null,j(b(u),(e,o)=>(_(),h("div",{key:o,class:""},[s("div",{class:"relative flex gap-3",onDblclick:a=>y(e)},[o&&e.activeValue==="set"&&!e.disabled?(_(),h("button",{key:0,onClick:a=>b(B)(o),class:"w-5 bg-red-600 text-white hover:bg-red-500 hover:text-white"}," X ",8,X)):A("",!0),s("div",Y,[s("div",q,"Order "+x(o+1),1),s("div",G,[s("div",H,[s("label",{for:"set"+o,class:p({"text-white font-bold":e.activeValue==="set","text-gray-700":e.activeValue!=="set"})},[r(s("input",{id:"set"+o,type:"radio",value:"set","onUpdate:modelValue":a=>e.activeValue=a,disabled:e.disabled},null,8,K),[[w,e.activeValue]]),t[7]||(t[7]=U(" Set "))],10,J),s("label",{for:"profit"+o,class:p({"text-green-500 font-bold":e.activeValue==="profit","text-gray-700":e.activeValue!=="profit"})},[r(s("input",{id:"profit"+o,type:"radio",value:"profit","onUpdate:modelValue":a=>e.activeValue=a,disabled:e.disabled,onChange:a=>i(e)},null,40,W),[[w,e.activeValue]]),t[8]||(t[8]=U(" TP "))],10,Q),s("span",{class:p({"text-green-500":e.activeValue==="profit","text-gray-700":e.activeValue!=="profit"})},x(b(m)(e.buy,e.amnt,e.tp)),3),s("label",{for:"loss"+o,class:p({"text-red-500 font-bold":e.activeValue==="loss","text-gray-700":e.activeValue!=="loss"})},[r(s("input",{id:"loss"+o,type:"radio",value:"loss","onUpdate:modelValue":a=>e.activeValue=a,disabled:e.disabled,onChange:a=>i(e)},null,40,k),[[w,e.activeValue]]),t[9]||(t[9]=U(" SL "))],10,Z),s("span",{class:p({"text-red-500":e.activeValue==="loss","text-gray-700":e.activeValue!=="loss"})},x(b(V)(e.buy,e.amnt,e.sl)),3)])])])],40,I),s("div",ee,[r(s("input",{id:"date"+o,type:"date","onUpdate:modelValue":a=>e.date=a,placeholder:"Date",class:"w-[8ch] bg-gray-900 text-center appearance-none",onFocus:t[0]||(t[0]=a=>v(l.date)),disabled:e.disabled},null,40,te),[[c,e.date]]),r(s("input",{id:"symbol"+o,type:"text","onUpdate:modelValue":a=>e.symbol=a,placeholder:"Symbol",class:"w-[6ch] bg-gray-900 text-center uppercase",onFocus:t[1]||(t[1]=a=>v(l.symbol)),disabled:e.disabled},null,40,ae),[[c,e.symbol]]),r(s("input",{id:"buy"+o,type:"number","onUpdate:modelValue":a=>e.buy=a,placeholder:"Buy",class:"w-[8ch] bg-gray-900 text-center text-blue-400 appearance-none",onFocus:t[2]||(t[2]=a=>v(l.buy)),disabled:e.disabled},null,40,se),[[c,e.buy]]),r(s("input",{id:"amnt"+o,type:"number","onUpdate:modelValue":a=>e.amnt=a,placeholder:"Amnt",class:"w-[6ch] bg-gray-900 text-center appearance-none",onFocus:t[3]||(t[3]=a=>v(l.amnt)),disabled:e.disabled},null,40,le),[[c,e.amnt]]),r(s("input",{id:"tp"+o,type:"number","onUpdate:modelValue":a=>e.tp=a,placeholder:"TP",class:p(["w-[8ch] bg-gray-900 text-center appearance-none",{"text-green-400":e.activeValue==="profit","text-gray-700":e.activeValue!=="profit"}]),onFocus:t[4]||(t[4]=a=>v("tp")),disabled:e.disabled},null,42,ne),[[c,e.tp]]),r(s("input",{id:"sl"+o,type:"number","onUpdate:modelValue":a=>e.sl=a,placeholder:"SL",class:p(["w-[8ch] bg-gray-900 text-center appearance-none",{"text-red-400":e.activeValue==="loss","text-gray-700":e.activeValue!=="loss"}]),onFocus:t[5]||(t[5]=a=>{v("sl"),S()}),disabled:e.disabled},null,42,oe),[[c,e.sl]])]),t[10]||(t[10]=s("hr",{class:"border-green-600 mt-2"},null,-1))]))),128))]),s("footer",de,[M(O)])],64))}};export{ue as default};
