import{d as re,j as d,k as ve,c as O,o as p,a as x,b as e,h as _,g as S,i as w,u as f,l as G,e as M,F as k,s as ne,m as W,n as Q,p as Le,f as z,q as te}from"./index-DWnsaP2K.js";const le=re("gridStore",()=>{const c=d(0),n=d(0),o=d(0),u=d(),i=d();ve(c,n);const l=O(()=>{let a=o.value;for(let y=2;y<=c.value;y++)a+=o.value*n.value**(y-1);return a.toFixed(2)});return{numOfOrder:c,coefNextOrderCost:n,firstOrderCost:o,priceRound:u,amountRound:i,gridCost:l}},{persist:!0}),Ce={class:"flex justify-between px-2 py-1 text-center"},$e={for:"numOfOrders"},Be={for:"firstOrderCost"},_e={for:"coefNextOrderCost"},Se={class:"flex gap-3"},we={class:"text-center font-bold"},Fe={__name:"GridCost",setup(c){const n=le(),{gridCost:o}=le();function u(i,l){}return(i,l)=>(p(),x(k,null,[l[10]||(l[10]=e("div",{class:"font-bold rounded-md px-2 text-blue-600"},"Grid Settings",-1)),e("div",Ce,[e("div",null,[e("label",$e,[l[6]||(l[6]=_("Orders: ")),S(e("input",{id:"numOfOrders",type:"number","onUpdate:modelValue":l[0]||(l[0]=a=>f(n).numOfOrder=a),step:"1",min:"1",required:"",class:"bg-gray-900 text-yellow-400 font-bold text-center",style:G({width:`${Math.max(f(n).numOfOrder.toString().length,1)}ch`}),onInput:l[1]||(l[1]=a=>void 0)},null,36),[[w,f(n).numOfOrder]])])]),e("div",null,[e("label",Be,[l[7]||(l[7]=_("Order: ")),S(e("input",{id:"firstOrderCost",type:"number","onUpdate:modelValue":l[2]||(l[2]=a=>f(n).firstOrderCost=a),step:"0.1",required:"",class:"bg-gray-900 text-yellow-400 font-bold text-center appearance-none",style:G({width:`${Math.max(f(n).firstOrderCost.toString().length,1)}ch`}),onInput:l[3]||(l[3]=a=>void 0)},null,36),[[w,f(n).firstOrderCost]])])]),e("div",null,[e("label",_e,[l[8]||(l[8]=_("Coef: ")),S(e("input",{id:"coefNextOrderCost",type:"number","onUpdate:modelValue":l[4]||(l[4]=a=>f(n).coefNextOrderCost=a),step:"0.1",required:"",class:"bg-gray-900 text-yellow-400 font-bold text-center appearance-none",style:G({width:`${Math.max(f(n).coefNextOrderCost.toString().length,1)}ch`}),onInput:l[5]||(l[5]=a=>void 0)},null,36),[[w,f(n).coefNextOrderCost]])])]),e("div",Se,[l[9]||(l[9]=e("div",{class:"font-bold"},"gridCost",-1)),e("div",we,M(f(o)),1)])]),l[11]||(l[11]=e("hr",{class:"border-green-600"},null,-1))],64))}},se=re("MinmaxStore",()=>{const c=d(1.2345),n=d(0),o=d(0),u=d(0),i=d(0),l=()=>{i.value=((Number(u.value/o.value-1)/2+(1-o.value/u.value)/2)/2*100).toFixed(1)};return ve(o,u),{minPrice:o,maxPrice:u,gridSize:i,firstBuyLevel:c,buyLevelsCoef:n,getProfit:l}},{persist:!0}),he={class:"w-full p-2"},Ne={class:"flex justify-between"},Me={for:"buyl"},Ae={for:"levc"},Te={class:"flex pl-2 pr-2 text-center flex-row text-sm justify-around gap-2"},Pe={class:""},ke={name:"min",class:""},Ve={class:""},De={name:"max",class:""},je={class:"flex gap-3"},qe={__name:"PriceOptions",setup(c){const{minPrice:n,maxPrice:o,gridSize:u,firstBuyLevel:i,buyLevelsCoef:l}=ne(se()),{getProfit:a}=se(),y=O(()=>n.value>o.value?"bg-red-500":"bg-green-800"),F=O(()=>n.value>o.value?"bg-red-500":"bg-green-800");function j(V,r){}return(V,r)=>(p(),x(k,null,[e("div",he,[e("div",Ne,[e("label",Me,[r[6]||(r[6]=_("First Buy Level: ")),S(e("input",{id:"buyl",type:"number","onUpdate:modelValue":r[0]||(r[0]=b=>W(i)?i.value=b:null),step:"0.01",required:"",class:"w-1/4 bg-gray-900 text-yellow-400 font-bold",style:G({width:`${Math.max(f(i).toString().length,1)}ch`}),onInput:r[1]||(r[1]=b=>void 0)},null,36),[[w,f(i)]]),r[7]||(r[7]=_("% "))]),e("label",Ae,[r[8]||(r[8]=_("Buy Levels Coef: ")),S(e("input",{id:"levc",type:"number","onUpdate:modelValue":r[2]||(r[2]=b=>W(l)?l.value=b:null),step:"0.01",required:"",class:"w-1/4 bg-gray-900 text-yellow-400 font-bold",style:G({width:`${Math.max(f(l).toString().length,1)}ch`}),onInput:r[3]||(r[3]=b=>void 0)},null,36),[[w,f(l)]]),r[9]||(r[9]=_("% "))])]),e("div",Te,[e("div",Pe,[e("label",ke,[r[10]||(r[10]=_("Min: ")),S(e("input",{id:"min",type:"number",name:"min","onUpdate:modelValue":r[4]||(r[4]=b=>W(n)?n.value=b:null),step:"0.001",required:"",class:Q(`w-20 bg-green-800 text-center border rounded-md ${y.value}`)},null,2),[[w,f(n)]])])]),e("div",Ve,[e("label",De,[r[11]||(r[11]=_("Max: ")),S(e("input",{id:"max",type:"number",name:"max","onUpdate:modelValue":r[5]||(r[5]=b=>W(o)?o.value=b:null),step:"0.001",required:"",class:Q(`w-20 bg-green-800 text-center border rounded-md ${F.value}`)},null,2),[[w,f(o)]])])]),e("div",je,[r[12]||(r[12]=e("div",{class:""},"TP,%:",-1)),e("div",Le(f(a)(),{type:"number",class:"font-bold"}),M(f(u)),17)])])]),r[13]||(r[13]=e("hr",{class:"border-green-600"},null,-1))],64))}},{minPrice:I,maxPrice:H,gridSize:ie,firstBuyLevel:Ue,buyLevelsCoef:ze}=ne(se()),{numOfOrder:g,coefNextOrderCost:R,firstOrderCost:J,priceRound:B,amountRound:Ie}=ne(le()),Re=re("table",()=>{let c=d([]),n=d([]),o=d([]),u=d([]),i=d([]),l=d([]),a=d([]),y=d([]),F=d([]);const j=d([]),V=O(()=>(ie.value/g.value).toFixed(2)),r=O(()=>Math.ceil(J.value*(1-R.value**g.value)/(1-R.value))),b=O(()=>(H.value-I.value-(H.value-I.value)*Ue.value).toFixed(B.value)),h=O(()=>(H.value-b.value).toFixed(B.value)),q=O(()=>(I.value-I.value*V.value/100).toFixed(B.value)),A=O(()=>(H.value-I.value).toFixed(B.value)),N=O(()=>((q.value/h.value)**(1/(g.value-1))).toFixed(4));c=O(()=>Array.from({length:g.value},(t,s)=>s+1));const X={3:{start:.95,end:1.05},4:{start:.9,end:1.1},5:{start:.85,end:1.15},6:{start:.8,end:1.2},7:{start:.75,end:1.25},8:{start:.7,end:1.3},9:{start:.65,end:1.35},10:{start:.6,end:1.4},11:{start:.55,end:1.45},12:{start:.5,end:1.5},13:{start:.45,end:1.55},14:{start:.4,end:1.6},15:{start:.35,end:1.65}};let Z,U;if(g.value>=3&&g.value<=15){const t=X[g.value];Z=t.start,U=t.end}const m=((t,s=h.value,v=N.value)=>Array.from({length:Math.floor(Math.log(t/s)/Math.log(v))+2}).map(($,P)=>s*v**P))(q.value);let L=[],C;//! fixed bugs of number orders
m.length!==g.value?C=1:C=0;for(let t=C;t<m.length-1;t++)L[t]=(m[t]-m[t+1]).toFixed(B.value);let D=L.reverse();L.push();const K=((t,s,v)=>Array.from({length:(s-t)/v+1},($,P)=>(t+P*v).toFixed(2)))(Z,U+.1,ze.value),ue=D.map(function(t,s){return(t*Number(K[s])).toFixed(B.value)}),fe=ue,me=h.value;n=[];function ce(t){t.reduce((s,v,$)=>n[$]=(s-v).toFixed(B.value),me)}ce(fe),n.unshift(h.value);const Y=(J.value*R.value**g.value).toFixed(2);let E=((t,s=J.value,v=R.value)=>Array.from({length:Math.floor(Math.log(t/s)/Math.log(v))}).map(($,P)=>s*v**P))(Y);E=E.map(function(t){return Number(t.toFixed(2))});let ee;//! fixed bugs of number orders
E.length!==g.value?ee=1:ee=0,o=((t,s=J.value,v=R.value)=>Array.from({length:Math.floor(Math.log(t/s)/Math.log(v))+ee}).map(($,P)=>s*v**P))(Y),o=o.map(function(t){return Number((t*1.001).toFixed(2));//! * 1.001 ??
});const be=o;function ye(t){u=[],t.reduce((s,v,$)=>u[$]=s+v,0),u=u.map(function(s){return Number(s.toFixed(2))}),u.join(" ")}ye(be),i=o.map(function(t,s){return+(t/Number(n[s])).toFixed(Ie.value)});const pe=i;function xe(t){l=[],t.reduce((s,v,$)=>l[$]=s+v,0),l=l.map(function(s){return Number(s.toFixed(3))})}xe(pe),a=u.map(function(t,s){return+(t/l[s]).toFixed(B.value)});let ae=[];for(let t=0;t<g.value;t++)ae.push(a[t]*(ie.value/100));y=a.map(function(t,s){return+(t+ae[s]).toFixed(B.value)});const de=y.map(function(t,s){return(t*Number(l[s])).toFixed(2)});F=de.map(function(t,s){return+(t-Number(u[s])).toFixed(2)});function ge(t,s){const v={date:t,symbol:s,data:{numOfOrderKeys:[...c.value],buyLimitLevels:[...n.value],buyOrdersArray:[...o.value],sumBuyOrders:[...u.value],amountBuyOrders:[...i.value],sumAmountOrders:[...l.value],buyZeroLevels:[...a.value],sellLevelsArray:[...y.value],totalProfit:[...F.value]}};j.value.push(v),c.value=[],n.value=[],o.value=[],u.value=[],i.value=[],l.value=[],a.value=[],y.value=[],F.value=[]}function Oe(t){j.value.splice(t,1)}return{gridFrequence:V,minGridDeposit:r,firstBuyLevelTicks:b,buyFirstLevel:h,tradeMinPrice:q,gridSizeTick:A,buyLevelsDiffCoef:N,numOfOrderKeys:c,baseBuyLevels:m,baseDiffDirect:L,baseDiffReverce:D,coefBuyLevelsArray:K,finalDiffBuyLevels:ue,buyLimitLevels:n,buyOrderNext:Y,xBuyOrdersArray:E,buyOrdersArray:o,sumBuyOrders:u,amountBuyOrders:i,sumAmountOrders:l,buyZeroLevels:a,sellLevelsArray:y,totalSellOrders:de,totalProfit:F,saveTable:ge,deleteTable:Oe}},{persist:!0}),Ge={class:"flex justify-between"},Ze={class:"flex justify-between text-xs text-center gap-2"},Ke={class:"font-bold underline"},Ee={class:"flex justify-between items-center"},We={class:"font-bold"},He={class:"font-bold"},Je=["onClick"],Qe={class:"flex justify-between text-xs text-center gap-2 mt-2"},Xe={class:"font-bold underline"},Ye={__name:"GridTable",setup(c){const{numOfOrderKeys:n,buyLimitLevels:o,buyOrdersArray:u,sumBuyOrders:i,amountBuyOrders:l,sumAmountOrders:a,buyZeroLevels:y,sellLevelsArray:F,totalProfit:j,saveTable:V,deleteTable:r,savedTables:b}=Re(),h=[{title:"N",class:""},{title:"Level",class:"text-green-400"},{title:"Amt",class:""},{title:"Sum",class:"font-bold"},{title:"Zero",class:"text-blue-400"},{title:"Sell",class:"text-red-400"},{title:"Buy",class:""},{title:"total",class:"font-bold"},{title:"TP",class:"bg-green-800"}],q=[n,o,l,a,y,F,u,i,j],A=d(null),N=d(""),X=()=>{if(!A.value||!N.value){alert("Please provide both date and symbol before saving.");return}V(A.value,N.value),A.value=null,N.value=""},Z=U=>{r(U)};return(U,T)=>(p(),x("div",null,[e("div",Ge,[S(e("input",{id:"'date",type:"date","onUpdate:modelValue":T[0]||(T[0]=m=>A.value=m),placeholder:"Date",class:"w-1/4 bg-gray-900 font-bold text-center"},null,512),[[w,A.value]]),S(e("input",{id:"'symbol",type:"text","onUpdate:modelValue":T[1]||(T[1]=m=>N.value=m),placeholder:"Symbol",class:"w-1/4 bg-gray-900 font-bold text-center"},null,512),[[w,N.value]]),e("button",{onClick:X,class:"bg-gray-900 p-1 border rounded-md"},"Save")]),e("div",Ze,[(p(),x(k,null,z(h,(m,L)=>e("div",{key:L,class:Q("container "+m.class)},[e("p",Ke,M(m.title),1),(p(!0),x(k,null,z(q[L],(C,D)=>(p(),x("div",{key:D,class:""},M(C),1))),128))],2)),64))]),e("div",null,[T[2]||(T[2]=e("h2",{class:"text-lg font-bold mb-4"},"Saved Tables",-1)),(p(!0),x(k,null,z(f(b),(m,L)=>(p(),x("div",{key:L,class:"border p-4 mb-4"},[e("div",Ee,[e("div",null,[e("p",We,"Date: "+M(m.date),1),e("p",He,"Symbol: "+M(m.symbol),1)]),e("button",{onClick:C=>Z(L),class:"text-red-400"},"Delete",8,Je)]),e("div",Qe,[(p(),x(k,null,z(h,(C,D)=>e("div",{key:D,class:Q("container "+C.class)},[e("p",Xe,M(C.title),1),(p(!0),x(k,null,z(m.data[C.title.toLowerCase()],(oe,K)=>(p(),x("div",{key:K},M(oe),1))),128))],2)),64))])]))),128))])]))}},et={class:""},rt={__name:"GridOptions",setup(c){return(n,o)=>(p(),x("div",et,[te(Fe),te(qe),te(Ye)]))}};export{rt as default};
