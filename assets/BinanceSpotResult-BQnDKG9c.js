import{d as b,r as U,w as S,t as w,c as F,o as V,a as v,b as s,n as y,u as c,e as g,F as N,f as T,g as i,v as x,h,i as m}from"./index-DWnsaP2K.js";import{f as D,s as P}from"./db-CgBKXKBP.js";const R="binanceSpotDatabase",E="binanceSpot",L=b("binanceStore",()=>{const p=U([]);(async()=>{const e=await D(R,E);e.length?e.forEach(a=>p.push(a)):p.push({date:null,symbol:"",buy:0,amnt:0,tp:0,sl:0,activeValue:"profit"})})(),S(()=>p,async e=>{const a=e.map(d=>w(d));await P(a)},{deep:!0});const u=2e-4,l=55e-5,t=(e,a,d)=>Number(e*a*u+d*a*l).toFixed(2),n=(e,a,d)=>Number(e*a*u+d*a*l).toFixed(2),o=(e,a,d)=>{const f=n(e,a,d);return Number((d-e)*a-f).toFixed(2)},_=(e,a,d)=>{const f=t(e,a,d);return Number((d-e)*a-f).toFixed(2)},B=F(()=>p.reduce((e,a)=>{const f=a.activeValue==="profit"?o(a.buy,a.amnt,a.tp):_(a.buy,a.amnt,a.sl);return e+Number(f)},0));return{blocks:p,addBlock:()=>{p.push({date:null,symbol:"",buy:0,amnt:0,tp:0,sl:0,activeValue:"profit"})},isBlockComplete:e=>e.date&&e.symbol&&e.buy>0&&e.amnt>0&&e.tp>0&&e.sl>0,calculateFeeTp:n,calculateFeeSl:t,calculateProfit:o,calculateLoss:_,totalSum:B}}),O={class:"px-2 py-1"},C={class:"flex justify-between border px-2"},M={class:"flex gap-3"},A={class:"flex gap-2"},j=["for"],z=["id","onUpdate:modelValue"],q=["for"],G=["id","onUpdate:modelValue"],H={class:""},I=["id","onUpdate:modelValue"],J=["id","onUpdate:modelValue"],K=["id","onUpdate:modelValue"],Q=["id","onUpdate:modelValue"],W=["id","onUpdate:modelValue"],X=["id","onUpdate:modelValue"],tt={__name:"BinanceSpotResult",setup(p){const r=L();return r.blocks,r.totalSum,S(()=>r.blocks.map(u=>({...u})),u=>{const l=u[u.length-1];r.isBlockComplete(l)&&r.addBlock()},{deep:!0}),(u,l)=>(V(),v("div",O,[s("div",C,[l[0]||(l[0]=s("p",{class:""},"Binance Spot Order",-1)),s("div",{class:y([{"text-green-500":c(r).totalSum>0,"text-red-500":c(r).totalSum<0,"text-gray-500":c(r).totalSum===0},"font-bold text-md"])}," Total Result: "+g(c(r).totalSum.toFixed(2)),3)]),(V(!0),v(N,null,T(c(r).blocks,(t,n)=>(V(),v("div",{key:n},[s("div",M,[l[3]||(l[3]=s("div",{class:"flex gap-5"},[s("p",{class:"text-yellow-400 font-bold"},"Order data"),s("p",null,"Result")],-1)),s("div",A,[s("label",{for:"profit-"+n,class:y({"text-green-500 font-bold":t.activeValue==="profit","text-gray-500":t.activeValue!=="profit"})},[i(s("input",{id:"profit-"+n,type:"radio",value:"profit","onUpdate:modelValue":o=>t.activeValue=o},null,8,z),[[x,t.activeValue]]),l[1]||(l[1]=h(" Profit "))],10,j),s("span",{class:y({"text-green-500":t.activeValue==="profit","text-gray-500":t.activeValue!=="profit"})},g(c(r).calculateProfit(t.buy,t.amnt,t.tp)),3),s("label",{for:"loss-"+n,class:y({"text-red-500 font-bold":t.activeValue==="loss","text-gray-500":t.activeValue!=="loss"})},[i(s("input",{id:"loss-"+n,type:"radio",value:"loss","onUpdate:modelValue":o=>t.activeValue=o},null,8,G),[[x,t.activeValue]]),l[2]||(l[2]=h(" Loss "))],10,q),s("span",{class:y({"text-red-500":t.activeValue==="loss","text-gray-500":t.activeValue!=="loss"})},g(c(r).calculateLoss(t.buy,t.amnt,t.sl)),3)])]),s("div",H,[i(s("input",{id:"date-"+n,type:"date","onUpdate:modelValue":o=>t.date=o,placeholder:"Date",class:"w-1/6 bg-gray-900 font-bold text-center"},null,8,I),[[m,t.date]]),i(s("input",{id:"symbol-"+n,type:"text","onUpdate:modelValue":o=>t.symbol=o,placeholder:"Symbol",class:"w-1/6 bg-gray-900 font-bold text-center"},null,8,J),[[m,t.symbol]]),i(s("input",{id:"buy-"+n,type:"number","onUpdate:modelValue":o=>t.buy=o,placeholder:"Buy",class:"w-1/6 bg-gray-900 font-bold text-center text-blue-400"},null,8,K),[[m,t.buy]]),i(s("input",{id:"amnt-"+n,type:"number","onUpdate:modelValue":o=>t.amnt=o,placeholder:"Amnt",class:"w-1/6 bg-gray-900 font-bold text-center"},null,8,Q),[[m,t.amnt]]),i(s("input",{id:"tp-"+n,type:"number","onUpdate:modelValue":o=>t.tp=o,placeholder:"TP",class:"w-1/6 bg-gray-900 font-bold text-center text-green-400"},null,8,W),[[m,t.tp]]),i(s("input",{id:"sl-"+n,type:"number","onUpdate:modelValue":o=>t.sl=o,placeholder:"SL",class:"w-1/6 bg-gray-900 font-bold text-center text-red-400"},null,8,X),[[m,t.sl]])]),l[4]||(l[4]=s("hr",{class:"border-green-600 mt-2"},null,-1))]))),128))]))}};export{tt as default};
