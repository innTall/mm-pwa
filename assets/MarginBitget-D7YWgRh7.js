import{d as ee,r as f,c as v,k as te,w as se,s as le,o as g,a as h,b as t,g as d,i as p,u as a,l as F,t as u,n as b,F as N,e as Q,f as ne,v as W,j as ie}from"./index-C3ngkTNG.js";import{_ as oe}from"./FooterBitget-DemqhAqc.js";const Z=ee("marginBitget",()=>{const m=f(5100),_=f(10),V=f(5),R=f(20),D=f(5),$=f(2);let B=1;const w=v(()=>(m.value*V.value/100).toFixed(2)),U=v(()=>(m.value*D.value/100).toFixed(2)),z=v(()=>(m.value*$.value/100).toFixed(2)),O=v(()=>(_.value*w.value).toFixed(2)),c=f([L()]),P=f([]);function G(){return B++}function L(){const e=te({id:G(),symbol:"",date:"",orders:[],isSaved:!1,totalActiveTpAndSl:v(()=>e.orders.reduce((o,s)=>(s.selectedSwitch==="tp"&&s.tp?o+=parseFloat(s.tp)||0:s.selectedSwitch==="sl"&&s.sl&&(o+=parseFloat(s.sl)||0),o),0).toFixed(2))}),i={id:1,buyPrice:null,amount:null,slPrice:null,tpPrice:null,selectedSwitch:null};return e.orders.push(i),se(()=>e.symbol,()=>{A()}),e}function A(){P.value=c.value.filter(e=>e.symbol).map(e=>e.symbol)}function X(){const e=L();c.value.unshift(e),A()}function E(e){e.orders||(e.orders=[]);const i={id:e.orders.length+1,buyPrice:null,amount:null,buyOrder:null,amountMath:null,slPrice:null,sl:null,slPriceMath:null,tpPrice:null,tp:null,tpPriceMath:null,selectedSwitch:"sl"};i.sl=q(i),i.tp=y(i),e.orders.push(i);const o=c.value.findIndex(s=>s.id===e.id);if(o!==-1){const[s]=c.value.splice(o,1);c.value.unshift(s),c.value=[...c.value]}}const M=v(()=>{const e=buyPrice.value;return e>=1e4?1:e>=1e3||e>=100?2:e>=10||e>=1?3:e>=.1?4:5}),Y=v(()=>{const e=M.value;if(e===1)return 3;if(e===2)return 2;if(e===3)return 1;if(e>=4)return 0}),S=e=>!e.buyPrice||!e.amount?0:(e.buyPrice*e.amount).toFixed(2),I=e=>{if(!e.buyPrice||e.buyPrice<=0)return 0;const i=m.value*V.value/100;return+(_.value*i/e.buyPrice).toFixed(Y.value)},x=e=>!e.buyPrice||!e.amount||e.amount<=0?null:((m.value*2/100-e.buyPrice*e.amount)*-1/e.amount).toFixed(M.value),H=e=>!e.buyPrice||!e.amount||e.amount<=0?null:((m.value*5/100+e.buyPrice*e.amount)/e.amount).toFixed(M.value),q=e=>{const i=parseFloat(e.slPrice);if(!i||!e.buyPrice||!e.amount)return null;const s=S(e)*.1/100,n=i*e.amount*.1/100;return((i-e.buyPrice)*e.amount-s-n).toFixed(2)},y=e=>{const i=parseFloat(e.tpPrice);if(!i||!e.buyPrice||!e.amount)return null;const s=S(e)*.1/100,n=i*e.amount*.1/100;return((i-e.buyPrice)*e.amount-s-n).toFixed(2)},T=v(()=>c.value.reduce((e,i)=>e+i.orders.reduce((o,s)=>(s.selectedSwitch==="tp"&&s.tp?o+=parseFloat(s.tp)||0:s.selectedSwitch==="sl"&&s.sl&&(o+=parseFloat(s.sl)||0),o),0),0).toFixed(2)),C=e=>{c.value=c.value.filter(i=>i.id!==e),A()},J=(e,i)=>{const o=e.orders.findIndex(s=>s.id===i);o!==-1&&e.orders.splice(o,1)},K=v(()=>[...P.value].sort((e,i)=>e.localeCompare(i)));return{deposit:m,leverage:_,riskMargin:V,margin:w,tpCost:U,slCost:z,buyOrderMath:O,coefNextOrderCost:R,takeProfit:D,stopLoss:$,activeBlocks:c,activeSymbols:P,sortedSymbols:K,totalActiveTpAndSl:T,addBlock:X,removeBlock:C,calculateBuyOrder:S,calculateAmountMath:I,calculateSlPriceMath:x,calculateTpPriceMath:H,calculateSl:q,calculateTp:y,addOrder:E,removeOrder:J}},{persist:!0}),ae={class:""},ue={class:"flex justify-between p-1 text-sm"},re={class:""},de={class:"flex justify-between"},ce={class:"flex justify-between"},pe={class:"flex justify-between"},me={class:""},ve={class:"flex justify-between"},fe={class:"flex justify-between"},xe={class:"flex justify-between"},ye={class:""},ge={class:"text-right"},he={class:"text-right"},be={class:"text-right"},_e={class:"text-center"},we={class:"px-1"},Pe={class:"flex gap-2 text-sm"},Se={class:"flex"},Ce={class:""},Fe={class:"flex justify-between"},Ve=["onUpdate:modelValue"],Be=["onUpdate:modelValue"],Ue={class:""},Oe=["onClick"],Ae=["onClick"],Me={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50"},Te={class:"bg-gray-700 rounded-lg shadow-lg w-1/2 max-w-md p-2 text-center"},je={class:"text-sm text-white"},De={class:"flex justify-between mt-1 items-center"},$e=["onUpdate:modelValue"],Le=["onUpdate:modelValue"],Ie={class:""},qe={class:"text-gray-500 text-xs"},Ne=["onClick"],Re={class:"flex justify-between mt-1 mb-1 items-center"},ze={class:"flex items-center"},Ge=["name","onUpdate:modelValue"],Xe=["onUpdate:modelValue","onInput"],Ee={class:"text-gray-500"},Ye={class:"text-xs"},He={class:"flex items-center"},Je=["name","onUpdate:modelValue"],Ke=["onUpdate:modelValue","onInput"],Qe={class:"text-gray-500"},We={class:"text-xs"},Ze={class:"fixed w-full h-12 left-0 bottom-0 z-10 bg-gray-900"},tt={__name:"MarginBitget",setup(k){const{deposit:j,leverage:m,riskMargin:_,margin:V,tpCost:R,slCost:D,buyOrderMath:$,coefNextOrderCost:B,takeProfit:w,stopLoss:U,activeBlocks:z,totalActiveTpAndSl:O,sortedSymbols:c}=le(Z()),{addBlock:P,removeBlock:G,addOrder:L,removeOrder:A,calculateBuyOrder:X,calculateAmountMath:E,calculateSlPriceMath:M,calculateTpPriceMath:Y,calculateSl:S,calculateTp:I}=Z(),x=(o,s)=>o.selectedSwitch===s?s==="sl"?"text-red-500":"text-green-500":"text-white",H=v(()=>O.value>0?"text-green-500":O.value<0?"text-red-500":"text-white"),q=o=>{const s=o.totalActiveTpAndSl;return s>0?"text-green-500":s<0?"text-red-500":"text-white"},y=f(!1),T=f("");let C=null;const J=o=>{T.value="Delete this block?",C=()=>G(o),y.value=!0},K=(o,s)=>{T.value="Delete this order?",C=()=>A(o,s),y.value=!0},e=()=>{C&&C(),y.value=!1},i=()=>{y.value=!1};return(o,s)=>(g(),h(N,null,[t("div",ae,[t("div",ue,[t("div",re,[t("div",de,[s[7]||(s[7]=t("div",{class:""},"Deposit, $:",-1)),d(t("input",{id:"deposit",type:"number","onUpdate:modelValue":s[0]||(s[0]=n=>F(j)?j.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[p,a(j)]])]),t("div",ce,[s[8]||(s[8]=t("div",{class:""},"Leverage:",-1)),d(t("input",{id:"leverage",type:"number","onUpdate:modelValue":s[1]||(s[1]=n=>F(m)?m.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[p,a(m)]])]),t("div",pe,[s[9]||(s[9]=t("div",{class:""},"CoefCost, %:",-1)),d(t("input",{id:"coefCost",type:"number","onUpdate:modelValue":s[2]||(s[2]=n=>F(B)?B.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[p,a(B)]])])]),t("div",me,[t("div",ve,[s[10]||(s[10]=t("div",{class:""},"Margin:",-1)),d(t("input",{id:"coefRisk",type:"number","onUpdate:modelValue":s[3]||(s[3]=n=>F(_)?_.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[p,a(_)]])]),t("div",fe,[s[11]||(s[11]=t("div",{class:""},"TP:",-1)),d(t("input",{id:"takeProfit",type:"number","onUpdate:modelValue":s[4]||(s[4]=n=>F(w)?w.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[p,a(w)]])]),t("div",xe,[s[12]||(s[12]=t("div",{class:""},"SL:",-1)),d(t("input",{id:"stopLoss",type:"number","onUpdate:modelValue":s[5]||(s[5]=n=>F(U)?U.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[p,a(U)]])])]),t("div",ye,[t("div",ge,u(a(V))+" $",1),t("div",he,u(a(R))+" $",1),t("div",be,u(a(D))+" $",1)]),t("div",_e,[t("button",{onClick:s[6]||(s[6]=(...n)=>a(P)&&a(P)(...n)),class:"px-2 border border-green-600 font-bold text-green-600"},"ADD"),s[13]||(s[13]=t("div",{class:""},"TP",-1)),t("div",{class:b(H.value)},u(a(O)),3)])]),s[17]||(s[17]=t("hr",{class:"border-green-600 mt-1"},null,-1)),t("div",we,[t("div",Pe,[s[14]||(s[14]=t("div",{class:""},"Symbols:",-1)),t("ul",Se,[(g(!0),h(N,null,Q(a(c),n=>(g(),h("li",{key:n,class:"uppercase"},u(n)+" . ",1))),128))])]),s[15]||(s[15]=t("hr",{class:"border-green-600"},null,-1))]),(g(!0),h(N,null,Q(a(z),n=>(g(),h("div",{key:n.id,class:"p-2 mt-1 text-sm"},[t("div",Ce,[t("div",Fe,[d(t("input",{id:"symbol",type:"text","onUpdate:modelValue":l=>n.symbol=l,placeholder:"Symbol",class:"w-[10ch] px-2 text-center font-bold bg-gray-900 border uppercase"},null,8,Ve),[[p,n.symbol]]),d(t("input",{id:"date",type:"date","onUpdate:modelValue":l=>n.date=l,class:"w-[10ch] bg-gray-900 border text-center"},null,8,Be),[[p,n.date]]),t("div",Ue,[t("span",{class:b(q(n))},u(n.totalActiveTpAndSl),3)]),t("button",{id:"removeBlock",onClick:l=>J(n.id),class:"px-2 font-bold text-red-600 border border-red-600"},"X Block",8,Oe),t("button",{id:"addOrder",onClick:l=>a(L)(n),class:"px-2 border border-green-600 font-extrabold text-green-600"}," + ",8,Ae),y.value?(g(),h("div",Me,[t("div",Te,[t("p",je,u(T.value),1),t("div",{class:"mt-2 flex justify-center space-x-4"},[t("button",{onClick:e,class:"bg-green-600 hover:bg-green-400 text-white px-4 py-2 rounded transition"}," Yes "),t("button",{onClick:i,class:"bg-red-600 hover:bg-red-400 text-white px-4 py-2 rounded transition"}," No ")])])])):ne("",!0)]),(g(!0),h(N,null,Q(n.orders,l=>(g(),h("div",{key:l.id,class:""},[t("div",De,[t("span",null,u(l.id),1),d(t("input",{id:"buyPrice",type:"number","onUpdate:modelValue":r=>l.buyPrice=r,placeholder:"Buy Price",class:"w-[6ch] bg-gray-900 text-center"},null,8,$e),[[p,l.buyPrice]]),d(t("input",{id:"amount",type:"number","onUpdate:modelValue":r=>l.amount=r,placeholder:"Amount",class:"w-[6ch] bg-gray-900 text-center"},null,8,Le),[[p,l.amount]]),t("span",Ie,u(a(X)(l)),1),t("div",qe,[t("span",null,"("+u(a(E)(l))+" - ",1),t("span",null,u(a($))+")",1)]),t("button",{id:"removeOrder",onClick:r=>K(n,l.id),class:"px-2 font-bold text-red-600 border border-red-600"},"X",8,Ne)]),t("div",Re,[t("div",ze,[d(t("input",{id:"sl",type:"radio",name:"switchGroup"+l.id,"onUpdate:modelValue":r=>l.selectedSwitch=r,value:"sl",class:"accent-red-600"},null,8,Ge),[[W,l.selectedSwitch]]),t("span",{class:b(x(l,"sl"))},"SL",2)]),d(t("input",{id:"slPrice",type:"number","onUpdate:modelValue":r=>l.slPrice=r,onInput:r=>l.sl=a(S)(l),placeholder:"SLprice",class:b(["w-[6ch] bg-gray-900 text-center",x(l,"sl")])},null,42,Xe),[[p,l.slPrice]]),t("span",{class:b(x(l,"sl"))},u(a(S)(l)),3),t("div",Ee,[t("span",Ye,"("+u(a(M)(l))+")",1)]),t("div",He,[d(t("input",{id:"tp",type:"radio",name:"switchGroup"+l.id,"onUpdate:modelValue":r=>l.selectedSwitch=r,value:"tp",class:"accent-green-600"},null,8,Je),[[W,l.selectedSwitch]]),t("span",{class:b(x(l,"tp"))},"TP",2)]),d(t("input",{id:"tpPrice",type:"number","onUpdate:modelValue":r=>l.tpPrice=r,onInput:r=>l.tp=a(I)(l),placeholder:"TPprice",class:b(["w-[6ch] bg-gray-900 text-center",x(l,"tp")])},null,42,Ke),[[p,l.tpPrice]]),t("span",{class:b(x(l,"tp"))},u(a(I)(l)),3),t("div",Qe,[t("span",We,"("+u(a(Y)(l))+")",1)])])]))),128))]),s[16]||(s[16]=t("hr",{class:"border-green-600"},null,-1))]))),128))]),t("footer",Ze,[ie(oe)])],64))}};export{tt as default};
