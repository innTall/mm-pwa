import{d as ee,r as m,k as te,c as h,w as se,s as ne,o as y,a as x,b as t,g as r,i as p,u as o,l as F,t as a,n as g,F as I,e as H,f as le,v as W,j as ie}from"./index-Cv8oVwkU.js";import{_ as oe}from"./FooterBinance-VLtpTDVe.js";const Z=ee("marginBinance",()=>{let P=1;const c=m(468),V=m(10),U=m(5),R=m(20),A=m(5),f=m(2),_=m(null),u=m([L()]),O=m([]),S=h(()=>(c.value*U.value/100).toFixed(2)),q=h(()=>(c.value*A.value/100).toFixed(2)),D=h(()=>(c.value*f.value/100).toFixed(2)),N=h(()=>(V.value*S.value).toFixed(2)),z=h(()=>u.value.reduce((e,i)=>e+i.orders.reduce((s,n)=>(n.selectedSwitch==="tp"&&n.tp?s+=parseFloat(n.tp)||0:n.selectedSwitch==="sl"&&n.sl&&(s+=parseFloat(n.sl)||0),s),0),0).toFixed(2)),G=h(()=>[...O.value].sort((e,i)=>e.localeCompare(i)));function X(){return P++}function T(){O.value=u.value.filter(e=>e.symbol).map(e=>e.symbol)}function L(){const e=te({id:X(),symbol:"",date:"",orders:[],isSaved:!1,totalActiveTpAndSl:h(()=>e.orders.reduce((s,n)=>(n.selectedSwitch==="tp"&&n.tp?s+=parseFloat(n.tp)||0:n.selectedSwitch==="sl"&&n.sl&&(s+=parseFloat(n.sl)||0),s),0).toFixed(2))}),i={id:1,buyPrice:_.value,amount:null,slPrice:null,tpPrice:null,selectedSwitch:null};return e.orders.push(i),se(()=>e.symbol,()=>{T()}),e}function E(){const e=L();u.value.unshift(e),T()}function M(e){u.value=u.value.filter(i=>i.id!==e),T()}function $(e){const i={id:e.orders.length+1,buyPrice:_.value,amount:null,buyOrder:null,amountMath:null,slPrice:null,sl:null,slPriceMath:null,tpPrice:null,tp:null,tpPriceMath:null,selectedSwitch:"sl"};e.orders.push(i);const s=u.value.findIndex(n=>n.id===e.id);if(s!==-1){const[n]=u.value.splice(s,1);u.value.unshift(n)}}function v(e,i){const s=e.orders.findIndex(n=>n.id===i);s!==-1&&e.orders.splice(s,1)}function j(e){return!e.buyPrice||!e.amount?0:(e.buyPrice*e.amount).toFixed(2)}function Y(e){const i=parseFloat(e.slPrice);if(!i||!e.buyPrice||!e.amount)return null;const n=j(e)*.1/100,l=i*e.amount*.1/100;return((i-e.buyPrice)*e.amount-n-l).toFixed(2)}function b(e){const i=parseFloat(e.tpPrice);if(!i||!e.buyPrice||!e.amount)return null;const n=j(e)*.1/100,l=i*e.amount*.1/100;return((i-e.buyPrice)*e.amount-n-l).toFixed(2)}function w(e){return e>=1e4?0:e>=1e3?1:e>=100||e>=10?2:e>=1?3:e>=.1?4:5}function C(e){if(e===0)return 4;if(e===1)return 3;if(e===2)return 2;if(e===3)return 1;if(e>=4)return 0}return{deposit:c,leverage:V,coefRisk:U,coefCost:R,takeProfit:A,stopLoss:f,activeBlocks:u,activeSymbols:O,sortedSymbols:G,totalActiveTpAndSl:z,margin:S,tpCost:q,slCost:D,buyOrderMath:N,addBlock:E,removeBlock:M,addOrder:$,removeOrder:v,calculateBuyOrder:j,calculateSl:Y,calculateTp:b,infoAmount:e=>{if(!e.buyPrice||e.buyPrice<=0)return 0;const i=w(e.buyPrice),s=C(i),n=c.value*U.value/100;return+(V.value*n/e.buyPrice).toFixed(s)},infoSlPrice:e=>{if(!e.buyPrice||!e.amount||e.amount<=0)return null;const i=w(e.buyPrice);return+((c.value*f.value/100-e.buyPrice*e.amount)*-1/e.amount).toFixed(i)},infoTpPrice:e=>{if(!e.buyPrice||!e.amount||e.amount<=0)return null;const i=w(e.buyPrice);return+((c.value*A.value/100+e.buyPrice*e.amount)/e.amount).toFixed(i)}}},{persist:!1}),ae={class:""},ue={class:"flex justify-between p-1 text-sm"},de={class:""},re={class:"flex justify-between"},ce=["id"],pe={class:"flex justify-between"},me=["id"],fe={class:"flex justify-between"},ve=["id"],ye={class:""},xe={class:"flex justify-between"},ge=["id"],he={class:"flex justify-between"},_e=["id"],be={class:"flex justify-between"},we=["id"],Pe={class:""},Se={class:"text-right"},Ce={class:"text-right"},Fe={class:"text-right"},Be={class:"text-center"},Ve={class:"px-1"},Ue={class:"flex gap-2 text-sm"},Ae={class:"flex"},Oe={class:""},Te={class:"flex justify-between"},je=["id","onUpdate:modelValue"],De=["id","onUpdate:modelValue"],Le={class:""},Me=["id","onClick"],$e=["id","onClick"],Ie={key:0,class:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50"},Re={class:"bg-gray-700 rounded-lg shadow-lg w-1/2 max-w-md p-2 text-center"},qe={class:"text-sm text-white"},Ne={class:"flex justify-between mt-1 items-center"},ze=["id","onUpdate:modelValue"],Ge=["id","onUpdate:modelValue"],Xe={class:""},Ee={class:"text-gray-500 text-xs"},Ye=["onClick"],He={class:"flex justify-between mt-1 mb-1 items-center"},Je={class:"flex items-center"},Ke=["id","name","onUpdate:modelValue"],Qe=["id","onUpdate:modelValue","onInput"],We={class:"text-gray-500"},Ze={class:"text-xs"},ke={class:"flex items-center"},et=["id","name","onUpdate:modelValue"],tt=["id","onUpdate:modelValue","onInput"],st={class:"text-gray-500"},nt={class:"text-xs"},lt={class:"fixed w-full h-12 left-0 bottom-0 z-10 bg-gray-900"},at={__name:"MarginBinance",setup(k){const{deposit:B,leverage:P,coefRisk:c,margin:V,tpCost:U,slCost:R,buyOrderMath:A,coefCost:f,takeProfit:_,stopLoss:u,activeBlocks:O,totalActiveTpAndSl:S,sortedSymbols:q}=ne(Z()),{addBlock:D,removeBlock:N,addOrder:z,removeOrder:G,calculateBuyOrder:X,infoAmount:T,infoSlPrice:L,infoTpPrice:E,calculateSl:M,calculateTp:$}=Z(),v=(i,s)=>i.selectedSwitch===s?s==="sl"?"text-red-500":"text-green-500":"text-white",j=h(()=>S.value>0?"text-green-500":S.value<0?"text-red-500":"text-white"),Y=i=>{const s=i.totalActiveTpAndSl;return s>0?"text-green-500":s<0?"text-red-500":"text-white"},b=m(!1),w=m("");let C=null;const J=i=>{w.value="Delete this block?",C=()=>N(i),b.value=!0},K=(i,s)=>{w.value="Delete this order?",C=()=>G(i,s),b.value=!0},Q=()=>{C&&C(),b.value=!1},e=()=>{b.value=!1};return(i,s)=>(y(),x(I,null,[t("div",ae,[t("div",ue,[t("div",de,[t("div",re,[s[7]||(s[7]=t("div",{class:""},"Deposit, $:",-1)),r(t("input",{id:"deposit-"+o(B),type:"number","onUpdate:modelValue":s[0]||(s[0]=n=>F(B)?B.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,8,ce),[[p,o(B)]])]),t("div",pe,[s[8]||(s[8]=t("div",{class:""},"Leverage:",-1)),r(t("input",{id:"leverage-"+o(P),type:"number","onUpdate:modelValue":s[1]||(s[1]=n=>F(P)?P.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,8,me),[[p,o(P)]])]),t("div",fe,[s[9]||(s[9]=t("div",{class:""},"CoefCost, %:",-1)),r(t("input",{id:"coefCost-"+o(f),type:"number","onUpdate:modelValue":s[2]||(s[2]=n=>F(f)?f.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,8,ve),[[p,o(f)]])])]),t("div",ye,[t("div",xe,[s[10]||(s[10]=t("div",{class:""},"Margin:",-1)),r(t("input",{id:"coefRisk-"+o(c),type:"number","onUpdate:modelValue":s[3]||(s[3]=n=>F(c)?c.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,8,ge),[[p,o(c)]])]),t("div",he,[s[11]||(s[11]=t("div",{class:""},"TP:",-1)),r(t("input",{id:"takeProfit-"+o(_),type:"number","onUpdate:modelValue":s[4]||(s[4]=n=>F(_)?_.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,8,_e),[[p,o(_)]])]),t("div",be,[s[12]||(s[12]=t("div",{class:""},"SL:",-1)),r(t("input",{id:"stopLoss-"+o(u),type:"number","onUpdate:modelValue":s[5]||(s[5]=n=>F(u)?u.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,8,we),[[p,o(u)]])])]),t("div",Pe,[t("div",Se,a(o(V))+" $",1),t("div",Ce,a(o(U))+" $",1),t("div",Fe,a(o(R))+" $",1)]),t("div",Be,[t("button",{onClick:s[6]||(s[6]=(...n)=>o(D)&&o(D)(...n)),class:"px-2 border border-green-600 font-bold text-green-600"},"ADD"),s[13]||(s[13]=t("div",{class:""},"TP",-1)),t("div",{class:g(j.value)},a(o(S)),3)])]),s[17]||(s[17]=t("hr",{class:"border-green-600 mt-1"},null,-1)),t("div",Ve,[t("div",Ue,[s[14]||(s[14]=t("div",{class:""},"Symbols:",-1)),t("ul",Ae,[(y(!0),x(I,null,H(o(q),n=>(y(),x("li",{key:n,class:"uppercase"},a(n)+" . ",1))),128))])]),s[15]||(s[15]=t("hr",{class:"border-green-600"},null,-1))]),(y(!0),x(I,null,H(o(O),n=>(y(),x("div",{key:n.id,class:"p-2 mt-1 text-sm"},[t("div",Oe,[t("div",Te,[r(t("input",{id:"symbol-"+n.id,type:"text","onUpdate:modelValue":l=>n.symbol=l,placeholder:"Symbol",class:"w-[10ch] px-2 text-center font-bold bg-gray-900 border uppercase"},null,8,je),[[p,n.symbol]]),r(t("input",{id:"date-"+n.id,type:"date","onUpdate:modelValue":l=>n.date=l,class:"w-[10ch] bg-gray-900 border text-center"},null,8,De),[[p,n.date]]),t("div",Le,[t("span",{class:g(Y(n))},a(n.totalActiveTpAndSl),3)]),t("button",{id:"removeBlock-"+n.id,onClick:l=>J(n.id),class:"px-2 font-bold text-red-600 border border-red-600"},"X Block",8,Me),t("button",{id:"addOrder-"+n.id,onClick:l=>o(z)(n),class:"px-2 border border-green-600 font-extrabold text-green-600"}," + ",8,$e),b.value?(y(),x("div",Ie,[t("div",Re,[t("p",qe,a(w.value),1),t("div",{class:"mt-2 flex justify-center space-x-4"},[t("button",{onClick:Q,class:"bg-green-600 hover:bg-green-400 text-white px-4 py-2 rounded transition"}," Yes "),t("button",{onClick:e,class:"bg-red-600 hover:bg-red-400 text-white px-4 py-2 rounded transition"}," No ")])])])):le("",!0)]),(y(!0),x(I,null,H(n.orders,l=>(y(),x("div",{key:l.id,class:""},[t("div",Ne,[t("span",null,a(l.id),1),r(t("input",{id:"buyPrice-"+n.id+"-"+l.id,type:"number","onUpdate:modelValue":d=>l.buyPrice=d,placeholder:"Buy Price",class:"w-[6ch] bg-gray-900 text-center"},null,8,ze),[[p,l.buyPrice]]),r(t("input",{id:"amount-"+n.id+"-"+l.id,type:"number","onUpdate:modelValue":d=>l.amount=d,placeholder:"Amount",class:"w-[6ch] bg-gray-900 text-center"},null,8,Ge),[[p,l.amount]]),t("span",Xe,a(o(X)(l)),1),t("div",Ee,[t("span",null,"("+a(o(T)(l))+" - ",1),t("span",null,a(o(A))+")",1)]),t("button",{id:"removeOrder",onClick:d=>K(n,l.id),class:"px-2 font-bold text-red-600 border border-red-600"},"X",8,Ye)]),t("div",He,[t("div",Je,[r(t("input",{id:"sl-"+n.id+"-"+l.id,type:"radio",name:"switchGroup"+l.id,"onUpdate:modelValue":d=>l.selectedSwitch=d,value:"sl",class:"accent-red-600"},null,8,Ke),[[W,l.selectedSwitch]]),t("span",{class:g(v(l,"sl"))},"SL",2)]),r(t("input",{id:"slPrice-"+n.id+"-"+l.id,type:"number","onUpdate:modelValue":d=>l.slPrice=d,onInput:d=>l.sl=o(M)(l),placeholder:"SLprice",class:g(["w-[6ch] bg-gray-900 text-center",v(l,"sl")])},null,42,Qe),[[p,l.slPrice]]),t("span",{class:g(v(l,"sl"))},a(o(M)(l)),3),t("div",We,[t("span",Ze,"("+a(o(L)(l))+")",1)]),t("div",ke,[r(t("input",{id:"tp-"+n.id+"-"+l.id,type:"radio",name:"switchGroup"+l.id,"onUpdate:modelValue":d=>l.selectedSwitch=d,value:"tp",class:"accent-green-600"},null,8,et),[[W,l.selectedSwitch]]),t("span",{class:g(v(l,"tp"))},"TP",2)]),r(t("input",{id:"tpPrice-"+n.id+"-"+l.id,type:"number","onUpdate:modelValue":d=>l.tpPrice=d,onInput:d=>l.tp=o($)(l),placeholder:"TPprice",class:g(["w-[6ch] bg-gray-900 text-center",v(l,"tp")])},null,42,tt),[[p,l.tpPrice]]),t("span",{class:g(v(l,"tp"))},a(o($)(l)),3),t("div",st,[t("span",nt,"("+a(o(E)(l))+")",1)])])]))),128))]),s[16]||(s[16]=t("hr",{class:"border-green-600"},null,-1))]))),128))]),t("footer",lt,[ie(oe)])],64))}};export{at as default};
