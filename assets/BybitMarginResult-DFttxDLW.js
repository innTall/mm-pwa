import{d as U,r as b,w as B,t as w,c as F,o as V,a as g,b as s,n as y,u as c,e as v,F as N,f as T,g as i,v as x,h,i as m}from"./index-DWnsaP2K.js";import{f as D,s as M}from"./db-CgBKXKBP.js";const O="orderDatabase",P="orders",R=U("orderStore",()=>{const p=b([]);(async()=>{const e=await D(O,P);e.length?e.forEach(a=>p.push(a)):p.push({date:null,symbol:"",buy:0,amnt:0,tp:0,sl:0,activeValue:"profit"})})(),B(()=>p,async e=>{const a=e.map(n=>w(n));await M(a)},{deep:!0});const u=2e-4,l=55e-5,t=(e,a,n)=>Number(e*a*u+n*a*l).toFixed(2),r=(e,a,n)=>Number(e*a*u+n*a*l).toFixed(2),o=(e,a,n)=>{const f=r(e,a,n);return Number((n-e)*a-f).toFixed(2)},_=(e,a,n)=>{const f=t(e,a,n);return Number((n-e)*a-f).toFixed(2)},S=F(()=>p.reduce((e,a)=>{const f=a.activeValue==="profit"?o(a.buy,a.amnt,a.tp):_(a.buy,a.amnt,a.sl);return e+Number(f)},0));return{blocks:p,addBlock:()=>{p.push({date:null,symbol:"",buy:0,amnt:0,tp:0,sl:0,activeValue:"profit"})},isBlockComplete:e=>e.date&&e.symbol&&e.buy>0&&e.amnt>0&&e.tp>0&&e.sl>0,calculateFeeTp:r,calculateFeeSl:t,calculateProfit:o,calculateLoss:_,totalSum:S}}),E={class:"px-2 py-1"},L={class:"flex justify-between border px-2"},C={class:"flex gap-3"},A={class:"flex gap-2"},j=["for"],z=["id","onUpdate:modelValue"],q=["for"],G=["id","onUpdate:modelValue"],H={class:""},I=["id","onUpdate:modelValue"],J=["id","onUpdate:modelValue"],K=["id","onUpdate:modelValue"],Q=["id","onUpdate:modelValue"],W=["id","onUpdate:modelValue"],X=["id","onUpdate:modelValue"],tt={__name:"BybitMarginResult",setup(p){const d=R();return d.blocks,d.totalSum,B(()=>d.blocks.map(u=>({...u})),u=>{const l=u[u.length-1];d.isBlockComplete(l)&&d.addBlock()},{deep:!0}),(u,l)=>(V(),g("div",E,[s("div",L,[l[0]||(l[0]=s("p",{class:""},"Bybit Margin Order",-1)),s("div",{class:y([{"text-green-500":c(d).totalSum>0,"text-red-500":c(d).totalSum<0,"text-gray-500":c(d).totalSum===0},"font-bold text-md"])}," Total Result: "+v(c(d).totalSum.toFixed(2)),3)]),(V(!0),g(N,null,T(c(d).blocks,(t,r)=>(V(),g("div",{key:r},[s("div",C,[l[3]||(l[3]=s("div",{class:"flex gap-5"},[s("p",{class:"text-yellow-400 font-bold"},"Order data"),s("p",null,"Result")],-1)),s("div",A,[s("label",{for:"profit-"+r,class:y({"text-green-500 font-bold":t.activeValue==="profit","text-gray-500":t.activeValue!=="profit"})},[i(s("input",{id:"profit-"+r,type:"radio",value:"profit","onUpdate:modelValue":o=>t.activeValue=o},null,8,z),[[x,t.activeValue]]),l[1]||(l[1]=h(" Profit "))],10,j),s("span",{class:y({"text-green-500":t.activeValue==="profit","text-gray-500":t.activeValue!=="profit"})},v(c(d).calculateProfit(t.buy,t.amnt,t.tp)),3),s("label",{for:"loss-"+r,class:y({"text-red-500 font-bold":t.activeValue==="loss","text-gray-500":t.activeValue!=="loss"})},[i(s("input",{id:"loss-"+r,type:"radio",value:"loss","onUpdate:modelValue":o=>t.activeValue=o},null,8,G),[[x,t.activeValue]]),l[2]||(l[2]=h(" Loss "))],10,q),s("span",{class:y({"text-red-500":t.activeValue==="loss","text-gray-500":t.activeValue!=="loss"})},v(c(d).calculateLoss(t.buy,t.amnt,t.sl)),3)])]),s("div",H,[i(s("input",{id:"date-"+r,type:"date","onUpdate:modelValue":o=>t.date=o,placeholder:"Date",class:"w-1/6 bg-gray-900 font-bold text-center"},null,8,I),[[m,t.date]]),i(s("input",{id:"symbol-"+r,type:"text","onUpdate:modelValue":o=>t.symbol=o,placeholder:"Symbol",class:"w-1/6 bg-gray-900 font-bold text-center"},null,8,J),[[m,t.symbol]]),i(s("input",{id:"buy-"+r,type:"number","onUpdate:modelValue":o=>t.buy=o,placeholder:"Buy",class:"w-1/6 bg-gray-900 font-bold text-center text-blue-400"},null,8,K),[[m,t.buy]]),i(s("input",{id:"amnt-"+r,type:"number","onUpdate:modelValue":o=>t.amnt=o,placeholder:"Amnt",class:"w-1/6 bg-gray-900 font-bold text-center"},null,8,Q),[[m,t.amnt]]),i(s("input",{id:"tp-"+r,type:"number","onUpdate:modelValue":o=>t.tp=o,placeholder:"TP",class:"w-1/6 bg-gray-900 font-bold text-center text-green-400"},null,8,W),[[m,t.tp]]),i(s("input",{id:"sl-"+r,type:"number","onUpdate:modelValue":o=>t.sl=o,placeholder:"SL",class:"w-1/6 bg-gray-900 font-bold text-center text-red-400"},null,8,X),[[m,t.sl]])]),l[4]||(l[4]=s("hr",{class:"border-green-600 mt-2"},null,-1))]))),128))]))}};export{tt as default};
