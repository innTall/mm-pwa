import{d as N,r as b,s as T,w as L,c as $,o as y,a as V,b as s,n as d,t as f,F as B,e as j,u as g,f as C,g as r,v as h,h as w,i as p,j as M}from"./index-DoNyJCQT.js";import{_ as P}from"./FooterBybit-BPiwmCl-.js";const S=N("marginStore",()=>{const c=b([{date:null,symbol:"",buy:null,amnt:null,tp:null,sl:null,activeValue:"set"}]),u=2e-4,v=55e-5,m=(n,a,t)=>Number(n*a*u+t*a*v).toFixed(2),_=(n,a,t)=>Number(n*a*u+t*a*v).toFixed(2);return{orderBlocks:c,T_P:(n,a,t)=>{const e=_(n,a,t);return Number((t-n)*a-e).toFixed(2)},S_L:(n,a,t)=>{const e=m(n,a,t);return Number((t-n)*a-e).toFixed(2)},addNewBlock:()=>{c.value.unshift({date:null,symbol:"",buy:null,amnt:null,tp:null,sl:null,activeValue:"set"})},removeBlock:n=>{c.value.splice(n,1)}}},{persist:!0}),A={class:"container min-h-screen mb-10 px-2 py-1 text-sm"},D={class:"flex justify-between border px-2 py-1"},O={class:"text-center font-bold"},R={class:"relative flex gap-3"},z=["onClick"],E={class:"container flex justify-between"},I={class:"text-yellow-400 font-bold"},X={class:"flex gap-3"},Y={class:"flex gap-3"},q=["for"],G=["id","onUpdate:modelValue"],H=["for"],J=["id","onUpdate:modelValue"],K=["for"],Q=["id","onUpdate:modelValue"],W={class:"flex justify-between"},Z=["id","onUpdate:modelValue","disabled"],k=["id","onUpdate:modelValue","disabled"],ee=["id","onUpdate:modelValue","disabled"],te=["id","onUpdate:modelValue","disabled"],ae=["id","onUpdate:modelValue","disabled"],se=["id","onUpdate:modelValue","disabled"],le={class:"fixed w-full h-12 left-0 bottom-0 z-10 bg-gray-900"},re={__name:"BybitMarginResult",setup(c){const{orderBlocks:u}=T(S()),{T_P:v,S_L:m,addNewBlock:_,removeBlock:F}=S(),i=a=>{a&&typeof a=="object"&&"value"in a?a.value="":a=""},x=b(!0);L(u,a=>{const t=a[0];t.date&&t.symbol&&t.buy&&t.amnt&&t.tp&&_()},{deep:!0});const U=()=>{x.value&&(store.addNewBlock(),x.value=!1)},n=$(()=>!Array.isArray(u.value)||u.value.length===0?0:u.value.reduce((a,t)=>{if(t.activeValue==="profit"){const e=parseFloat(t.buy&&t.amnt&&t.tp?v(t.buy,t.amnt,t.tp):0);return a+e}else if(t.activeValue==="loss"){const e=parseFloat(t.buy&&t.amnt&&t.sl?m(t.buy,t.amnt,t.sl):0);return a+e}return a},0));return(a,t)=>(y(),V(B,null,[s("div",A,[s("div",D,[t[6]||(t[6]=s("div",{class:""},"BYBIT Margin Order",-1)),s("div",O,[s("p",{class:d({"text-green-500 font-bold":n.value>0,"text-red-500 font-bold":n.value<0,"text-gray-500":n.value===0})}," Total: "+f(n.value.toFixed(2)),3)])]),(y(!0),V(B,null,j(g(u),(e,o)=>(y(),V("div",{key:o,class:""},[s("div",R,[o&&e.activeValue==="set"?(y(),V("button",{key:0,onClick:l=>g(F)(o),class:"w-5 bg-red-600 text-white hover:bg-red-500 hover:text-white"}," X ",8,z)):C("",!0),s("div",E,[s("div",I,"Order "+f(o+1),1),s("div",X,[s("div",Y,[s("label",{for:"set"+o,class:d({"text-white font-bold":e.activeValue==="set","text-gray-500":e.activeValue!=="set"})},[r(s("input",{id:"set"+o,type:"radio",value:"set","onUpdate:modelValue":l=>e.activeValue=l},null,8,G),[[h,e.activeValue]]),t[7]||(t[7]=w(" Set "))],10,q),s("label",{for:"profit"+o,class:d({"text-green-500 font-bold":e.activeValue==="profit","text-gray-500":e.activeValue!=="profit"})},[r(s("input",{id:"profit"+o,type:"radio",value:"profit","onUpdate:modelValue":l=>e.activeValue=l},null,8,J),[[h,e.activeValue]]),t[8]||(t[8]=w(" TP "))],10,H),s("span",{class:d({"text-green-500":e.activeValue==="profit","text-gray-500":e.activeValue!=="profit"})},f(g(v)(e.buy,e.amnt,e.tp)),3),s("label",{for:"loss"+o,class:d({"text-red-500 font-bold":e.activeValue==="loss","text-gray-500":e.activeValue!=="loss"})},[r(s("input",{id:"loss"+o,type:"radio",value:"loss","onUpdate:modelValue":l=>e.activeValue=l},null,8,Q),[[h,e.activeValue]]),t[9]||(t[9]=w(" SL "))],10,K),s("span",{class:d({"text-red-500":e.activeValue==="loss","text-gray-500":e.activeValue!=="loss"})},f(g(m)(e.buy,e.amnt,e.sl)),3)])])])]),s("div",W,[r(s("input",{id:"date"+o,type:"date","onUpdate:modelValue":l=>e.date=l,placeholder:"Date",class:"w-[8ch] bg-gray-900 text-center appearance-none",onFocus:t[0]||(t[0]=l=>i(a.date)),disabled:e.activeValue!=="set"},null,40,Z),[[p,e.date]]),r(s("input",{id:"symbol"+o,type:"text","onUpdate:modelValue":l=>e.symbol=l,placeholder:"Symbol",class:"w-[6ch] bg-gray-900 text-center uppercase",onFocus:t[1]||(t[1]=l=>i(a.symbol)),disabled:e.activeValue!=="set"},null,40,k),[[p,e.symbol]]),r(s("input",{id:"buy"+o,type:"number","onUpdate:modelValue":l=>e.buy=l,placeholder:"Buy",class:"w-[8ch] bg-gray-900 text-center text-blue-400 appearance-none",onFocus:t[2]||(t[2]=l=>i(a.buy)),disabled:e.activeValue!=="set"},null,40,ee),[[p,e.buy]]),r(s("input",{id:"amnt"+o,type:"number","onUpdate:modelValue":l=>e.amnt=l,placeholder:"Amnt",class:"w-[6ch] bg-gray-900 text-center appearance-none",onFocus:t[3]||(t[3]=l=>i(a.amnt)),disabled:e.activeValue!=="set"},null,40,te),[[p,e.amnt]]),r(s("input",{id:"tp"+o,type:"number","onUpdate:modelValue":l=>e.tp=l,placeholder:"TP",class:d(["w-[8ch] bg-gray-900 text-center text-green-400 appearance-none",{"text-green-400":e.activeValue==="profit","text-gray-500":e.activeValue==="loss"||e.activeValue!=="set"}]),onFocus:t[4]||(t[4]=l=>i(a.tp)),disabled:e.activeValue!=="set"},null,42,ae),[[p,e.tp]]),r(s("input",{id:"sl"+o,type:"number","onUpdate:modelValue":l=>e.sl=l,placeholder:"SL",class:d(["w-[8ch] bg-gray-900 text-center text-red-400 appearance-none",{"text-red-400":e.activeValue==="loss","text-gray-500":e.activeValue==="profit"||e.activeValue!=="set"}]),onFocus:t[5]||(t[5]=l=>{i(a.sl),U()}),disabled:e.activeValue!=="set"},null,42,se),[[p,e.sl]])]),t[10]||(t[10]=s("hr",{class:"border-green-600 mt-2"},null,-1))]))),128))]),s("footer",le,[M(P)])],64))}};export{re as default};
