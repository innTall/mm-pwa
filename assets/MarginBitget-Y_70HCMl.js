import{d as k,r as x,c as f,k as ee,w as te,s as se,o as h,a as _,b as t,h as v,g as u,i as m,u as i,l as V,t as c,F as N,e as J,v as K,n as C,j as le}from"./index-CsSnTqQK.js";import{_ as ne}from"./FooterBitget-CWjIjU2R.js";const Q=k("marginBitget",()=>{const y=x(5100),b=x(10),B=x(5),j=x(20),L=x(5),A=x(2);let F=1;const P=f(()=>(y.value*B.value/100).toFixed(2)),U=f(()=>(y.value*L.value/100).toFixed(2)),D=f(()=>(y.value*A.value/100).toFixed(2)),R=f(()=>(b.value*P.value).toFixed(2)),d=x([I()]),w=x([]);function z(){return F++}function I(){const e=ee({id:z(),symbol:"",date:"",orders:[],isSaved:!1,summary:f(()=>e.orders.length>0?e.orders[e.orders.length-1].profit:0)}),o={id:1,buyPrice:null,amount:null,slPrice:null,tpPrice:null,selectedSwitch:null};return e.orders.push(o),te(()=>e.symbol,()=>{O()}),e}function O(){w.value=d.value.filter(e=>e.symbol).map(e=>e.symbol)}function G(){const e=I();d.value.unshift(e),O()}function X(e){e.orders||(e.orders=[]);const o={id:e.orders.length+1,buyPrice:null,amount:null,buyOrder:null,amountMath:null,slPrice:null,sl:null,slPriceMath:null,tpPrice:null,tp:null,tpPriceMath:null,selectedSwitch:"sl"};o.sl=s(o),o.tp=n(o),e.orders.push(o);const p=d.value.findIndex(r=>r.id===e.id);if(p!==-1){const[r]=d.value.splice(p,1);d.value.unshift(r),d.value=[...d.value]}}const M=f(()=>{const e=buyPrice.value;return e>=1e4?1:e>=1e3||e>=100?2:e>=10||e>=1?3:e>=.1?4:5}),E=f(()=>{const e=M.value;if(e===1)return 3;if(e===2)return 2;if(e===3)return 1;if(e>=4)return 0}),S=e=>!e.buyPrice||!e.amount?0:(e.buyPrice*e.amount).toFixed(2),q=e=>{if(!e.buyPrice||e.buyPrice<=0)return 0;const o=y.value*B.value/100;return+(b.value*o/e.buyPrice).toFixed(E.value)},g=e=>!e.buyPrice||!e.amount||e.amount<=0?null:((y.value*2/100-e.buyPrice*e.amount)*-1/e.amount).toFixed(M.value),$=e=>!e.buyPrice||!e.amount||e.amount<=0?null:((y.value*5/100+e.buyPrice*e.amount)/e.amount).toFixed(M.value),s=e=>{const o=parseFloat(e.slPrice);if(!o||!e.buyPrice||!e.amount)return null;const r=S(e)*.1/100,H=o*e.amount*.1/100;return((o-e.buyPrice)*e.amount-r-H).toFixed(2)},n=e=>{const o=parseFloat(e.tpPrice);if(!o||!e.buyPrice||!e.amount)return null;const r=S(e)*.1/100,H=o*e.amount*.1/100;return((o-e.buyPrice)*e.amount-r-H).toFixed(2)},l=f(()=>d.value.reduce((e,o)=>e+o.orders.reduce((p,r)=>(r.selectedSwitch==="tp"&&r.tp?p+=parseFloat(r.tp)||0:r.selectedSwitch==="sl"&&r.sl&&(p+=parseFloat(r.sl)||0),p),0),0).toFixed(2)),a=e=>{d.value=d.value.filter(o=>o.id!==e),O()},Y=(e,o)=>{const p=e.orders.findIndex(r=>r.id===o);p!==-1&&e.orders.splice(p,1)},Z=f(()=>[...w.value].sort((e,o)=>e.localeCompare(o)));return{deposit:y,leverage:b,riskMargin:B,margin:P,tpCost:U,slCost:D,buyOrderMath:R,coefNextOrderCost:j,takeProfit:L,stopLoss:A,activeBlocks:d,activeSymbols:w,sortedSymbols:Z,addBlock:G,removeBlock:a,calculateBuyOrder:S,calculateAmountMath:q,calculateSlPriceMath:g,calculateTpPriceMath:$,calculateSl:s,calculateTp:n,addOrder:X,removeOrder:Y,totalActiveTpAndSl:l}},{persist:!0}),oe={class:""},ie={class:"flex justify-between text-left p-1 text-sm"},ae={class:"container w-1/3"},re={class:""},ue={for:"deposit"},de={class:""},ce={for:"leverage"},pe={class:""},me={for:"coefCost"},ye={class:""},fe={for:"stopLoss"},ve={for:"takeProfit"},ge={for:"stopLoss"},xe={class:"text-center"},be={class:"text-green-600"},he={class:""},_e={class:"px-1 flex gap-2 text-sm"},Pe={class:"flex"},we={class:""},Se={class:"flex justify-between"},Ve=["onUpdate:modelValue"],Ce=["onUpdate:modelValue"],Be=["onClick"],Fe=["onClick"],Ue={class:"flex justify-between mt-1"},Oe=["onUpdate:modelValue"],Me=["onUpdate:modelValue"],Te={class:""},Le={class:"text-gray-500 text-xs"},Ae=["onClick"],Ie={class:"flex justify-between mt-1 mb-1 items-center"},qe={class:"flex items-center"},$e=["name","onUpdate:modelValue"],Ne=["onUpdate:modelValue","onInput"],je={class:"text-gray-500"},De={class:"text-xs"},Re={class:"flex items-center"},ze=["name","onUpdate:modelValue"],Ge=["onUpdate:modelValue","onInput"],Xe={class:"text-gray-500"},Ee={class:"text-xs"},He={class:"fixed w-full h-12 left-0 bottom-0 z-10 bg-gray-900"},Qe={__name:"MarginBitget",setup(W){const{deposit:T,leverage:y,riskMargin:b,margin:B,tpCost:j,slCost:L,buyOrderMath:A,coefNextOrderCost:F,takeProfit:P,stopLoss:U,activeBlocks:D,totalActiveTpAndSl:R,sortedSymbols:d}=se(Q()),{addBlock:w,removeBlock:z,addOrder:I,removeOrder:O,calculateBuyOrder:G,calculateAmountMath:X,calculateSlPriceMath:M,calculateTpPriceMath:E,calculateSl:S,calculateTp:q}=Q(),g=($,s)=>$.selectedSwitch===s?s==="sl"?"text-red-500":"text-green-500":"text-white";return($,s)=>(h(),_(N,null,[t("div",oe,[t("div",ie,[t("div",ae,[t("div",re,[t("label",ue,[s[7]||(s[7]=v("Deposit, $: ")),u(t("input",{id:"deposit",type:"number","onUpdate:modelValue":s[0]||(s[0]=n=>V(T)?T.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[m,i(T)]])])]),t("div",de,[t("label",ce,[s[8]||(s[8]=v("Leverage: ")),u(t("input",{id:"leverage",type:"number","onUpdate:modelValue":s[1]||(s[1]=n=>V(y)?y.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[m,i(y)]])])]),t("div",pe,[t("label",me,[s[9]||(s[9]=v("CoefCost, %: ")),u(t("input",{id:"coefCost",type:"number","onUpdate:modelValue":s[2]||(s[2]=n=>V(F)?F.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[m,i(F)]])])])]),t("div",ye,[t("div",null,[t("label",fe,[s[10]||(s[10]=v("RiskMargin: ")),u(t("input",{id:"coefRisk",type:"number","onUpdate:modelValue":s[3]||(s[3]=n=>V(b)?b.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[m,i(b)]])]),v(" "+c(i(B)),1)]),t("div",null,[t("label",ve,[s[11]||(s[11]=v("TakeProfit: ")),u(t("input",{id:"takeProfit",type:"number","onUpdate:modelValue":s[4]||(s[4]=n=>V(P)?P.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[m,i(P)]])]),v(" "+c(i(j)),1)]),t("div",null,[t("label",ge,[s[12]||(s[12]=v("StopLoss: ")),u(t("input",{id:"stopLoss",type:"number","onUpdate:modelValue":s[5]||(s[5]=n=>V(U)?U.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[m,i(U)]])]),v(" "+c(i(L)),1)])]),t("div",xe,[t("button",{onClick:s[6]||(s[6]=(...n)=>i(w)&&i(w)(...n)),class:"bg-gray-700 border px-1"},"ADD"),s[13]||(s[13]=t("div",{class:""},"TP",-1)),t("div",be,c(i(R)),1)])]),s[17]||(s[17]=t("hr",{class:"border-green-600 mt-1"},null,-1)),t("div",he,[t("div",_e,[s[14]||(s[14]=t("div",{class:""},"Symbols:",-1)),t("ul",Pe,[(h(!0),_(N,null,J(i(d),n=>(h(),_("li",{key:n,class:"uppercase"},c(n)+" . ",1))),128))])]),s[15]||(s[15]=t("hr",{class:"border-green-600"},null,-1))]),(h(!0),_(N,null,J(i(D),n=>(h(),_("div",{key:n.id,class:"p-2 mt-1 text-sm"},[t("div",we,[t("div",Se,[u(t("input",{id:"symbol",type:"text","onUpdate:modelValue":l=>n.symbol=l,placeholder:"Symbol",class:"w-[10ch] px-2 text-yellow-400 text-center font-bold bg-gray-900 border border-gray-700 outline-none focus:bg-gray-800 focus:ring focus:ring-yellow-400 focus:border-yellow-400 invalid:bg-red-900 valid:bg-gray-800 uppercase"},null,8,Ve),[[m,n.symbol]]),u(t("input",{id:"date",type:"date","onUpdate:modelValue":l=>n.date=l,class:"w-[10ch] bg-gray-900 border text-center"},null,8,Ce),[[m,n.date]]),t("button",{id:"removeBlock",onClick:l=>i(z)(n.id),class:"border bg-gray-700 px-2"},"X Block",8,Be),t("button",{id:"addOrder",onClick:l=>i(I)(n),class:"px-2 border border-green-600 font-extrabold text-green-600"}," + ",8,Fe)]),(h(!0),_(N,null,J(n.orders,l=>(h(),_("div",{key:l.id,class:""},[t("div",Ue,[t("span",null,c(l.id),1),u(t("input",{id:"buyPrice",type:"number","onUpdate:modelValue":a=>l.buyPrice=a,placeholder:"Buy Price",class:"w-[6ch] bg-gray-900 text-center"},null,8,Oe),[[m,l.buyPrice]]),u(t("input",{id:"amount",type:"number","onUpdate:modelValue":a=>l.amount=a,placeholder:"Amount",class:"w-[6ch] bg-gray-900 text-center"},null,8,Me),[[m,l.amount]]),t("span",Te,c(i(G)(l)),1),t("div",Le,[t("span",null,"("+c(i(X)(l))+" - ",1),t("span",null,c(i(A))+")",1)]),t("button",{id:"removeOrder",onClick:a=>i(O)(n,l.id),class:"px-2 font-bold text-red-600 border border-red-600"},"X",8,Ae)]),t("div",Ie,[t("div",qe,[u(t("input",{id:"sl",type:"radio",name:"switchGroup"+l.id,"onUpdate:modelValue":a=>l.selectedSwitch=a,value:"sl",class:"accent-red-600"},null,8,$e),[[K,l.selectedSwitch]]),t("span",{class:C(g(l,"sl"))},"SL",2)]),u(t("input",{id:"slPrice",type:"number","onUpdate:modelValue":a=>l.slPrice=a,onInput:a=>l.sl=i(S)(l),placeholder:"SLprice",class:C(["w-[6ch] bg-gray-900 text-center",g(l,"sl")])},null,42,Ne),[[m,l.slPrice]]),t("span",{class:C(g(l,"sl"))},c(i(S)(l)),3),t("div",je,[t("span",De,"("+c(i(M)(l))+")",1)]),t("div",Re,[u(t("input",{id:"tp",type:"radio",name:"switchGroup"+l.id,"onUpdate:modelValue":a=>l.selectedSwitch=a,value:"tp",class:"accent-green-600"},null,8,ze),[[K,l.selectedSwitch]]),t("span",{class:C(g(l,"tp"))},"TP",2)]),u(t("input",{id:"tpPrice",type:"number","onUpdate:modelValue":a=>l.tpPrice=a,onInput:a=>l.tp=i(q)(l),placeholder:"TPprice",class:C(["w-[6ch] bg-gray-900 text-center",g(l,"tp")])},null,42,Ge),[[m,l.tpPrice]]),t("span",{class:C(g(l,"tp"))},c(i(q)(l)),3),t("div",Xe,[t("span",Ee,"("+c(i(E)(l))+")",1)])])]))),128))]),s[16]||(s[16]=t("hr",{class:"border-green-600"},null,-1))]))),128))]),t("footer",He,[le(ne)])],64))}};export{Qe as default};
