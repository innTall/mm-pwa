import{d as k,r as x,c as v,k as ee,w as te,s as se,o as h,a as _,b as t,h as f,g as r,i as c,u as i,l as V,t as p,F as H,e as J,v as K,n as C}from"./index-BQiCjAHQ.js";const Q=k("marginBitget",()=>{const y=x(236),b=x(10),U=x(5),D=x(20),L=x(5),A=x(2);let B=1;const P=v(()=>(y.value*U.value/100).toFixed(2)),F=v(()=>(y.value*L.value/100).toFixed(2)),N=v(()=>(y.value*A.value/100).toFixed(2)),R=v(()=>(b.value*P.value).toFixed(2)),d=x([$()]),w=x([]);function j(){return B++}function $(){const e=ee({id:j(),symbol:"",open:"",close:"",orders:[],isSaved:!1,summary:v(()=>e.orders.length>0?e.orders[e.orders.length-1].profit:0)}),o={id:1,buyPrice:null,amount:null,slPrice:null,tpPrice:null,selectedSwitch:null};return e.orders.push(o),te(()=>e.symbol,()=>{O()}),e}function O(){w.value=d.value.filter(e=>e.symbol).map(e=>e.symbol)}function G(){const e=$();d.value.unshift(e),O()}function X(e){e.orders||(e.orders=[]);const o={id:e.orders.length+1,buyPrice:null,amount:null,buyOrder:null,amountMath:null,slPrice:null,sl:null,slPriceMath:null,tpPrice:null,tp:null,tpPriceMath:null,selectedSwitch:"sl"};o.sl=l(o),o.tp=n(o),e.orders.push(o);const m=d.value.findIndex(u=>u.id===e.id);if(m!==-1){const[u]=d.value.splice(m,1);d.value.unshift(u),d.value=[...d.value]}}const M=v(()=>{const e=buyPrice.value;return e>=1e4?1:e>=1e3||e>=100?2:e>=10||e>=1?3:e>=.1?4:5}),z=v(()=>{const e=M.value;if(e===1)return 3;if(e===2)return 2;if(e===3)return 1;if(e>=4)return 0}),S=e=>!e.buyPrice||!e.amount?0:(e.buyPrice*e.amount).toFixed(2),I=e=>{if(!e.buyPrice||e.buyPrice<=0)return 0;const o=y.value*U.value/100;return+(b.value*o/e.buyPrice).toFixed(z.value)},g=e=>!e.buyPrice||!e.amount||e.amount<=0?null:((y.value*2/100-e.buyPrice*e.amount)*-1/e.amount).toFixed(M.value),q=e=>!e.buyPrice||!e.amount||e.amount<=0?null:((y.value*5/100+e.buyPrice*e.amount)/e.amount).toFixed(M.value),l=e=>{const o=parseFloat(e.slPrice);if(!o||!e.buyPrice||!e.amount)return null;const u=S(e)*.1/100,E=o*e.amount*.1/100;return((o-e.buyPrice)*e.amount-u-E).toFixed(2)},n=e=>{const o=parseFloat(e.tpPrice);if(!o||!e.buyPrice||!e.amount)return null;const u=S(e)*.1/100,E=o*e.amount*.1/100;return((o-e.buyPrice)*e.amount-u-E).toFixed(2)},s=v(()=>d.value.reduce((e,o)=>e+o.orders.reduce((m,u)=>(u.selectedSwitch==="tp"&&u.tp?m+=parseFloat(u.tp)||0:u.selectedSwitch==="sl"&&u.sl&&(m+=parseFloat(u.sl)||0),m),0),0).toFixed(2)),a=e=>{d.value=d.value.filter(o=>o.id!==e),O()},Y=(e,o)=>{const m=e.orders.findIndex(u=>u.id===o);m!==-1&&e.orders.splice(m,1)},Z=v(()=>[...w.value].sort((e,o)=>e.localeCompare(o)));return{deposit:y,leverage:b,riskMargin:U,margin:P,tpCost:F,slCost:N,buyOrderMath:R,coefNextOrderCost:D,takeProfit:L,stopLoss:A,activeBlocks:d,activeSymbols:w,sortedSymbols:Z,addBlock:G,removeBlock:a,calculateBuyOrder:S,calculateAmountMath:I,calculateSlPriceMath:g,calculateTpPriceMath:q,calculateSl:l,calculateTp:n,addOrder:X,removeOrder:Y,totalActiveTpAndSl:s}},{persist:!0}),le={class:""},ne={class:"flex justify-between text-left p-1 text-sm"},oe={class:"container w-1/3"},ie={class:""},ae={for:"deposit"},ue={class:""},re={for:"leverage"},de={class:""},ce={for:"coefCost"},pe={class:""},me={for:"stopLoss"},ye={for:"takeProfit"},ve={for:"stopLoss"},fe={class:"text-center"},ge={class:"text-green-600"},xe={class:""},be={class:"flex gap-2"},he={class:"flex"},_e={class:""},Pe={class:"flex justify-between"},we=["onUpdate:modelValue"],Se=["onUpdate:modelValue"],Ve=["onUpdate:modelValue"],Ce=["onClick"],Ue=["onClick"],Be={class:"flex justify-between mt-1"},Fe=["onUpdate:modelValue"],Oe=["onUpdate:modelValue"],Me={class:""},Te={class:"text-gray-500 text-xs"},Le=["onClick"],Ae={class:"flex justify-between mt-1 mb-1 items-center"},$e={class:"flex items-center"},Ie=["name","onUpdate:modelValue"],qe=["onUpdate:modelValue","onInput"],De={class:"text-gray-500"},Ne={class:"text-xs"},Re={class:"flex items-center"},je=["name","onUpdate:modelValue"],Ge=["onUpdate:modelValue","onInput"],Xe={class:"text-gray-500"},ze={class:"text-xs"},He={__name:"MarginBitget",setup(W){const{deposit:T,leverage:y,riskMargin:b,margin:U,tpCost:D,slCost:L,buyOrderMath:A,coefNextOrderCost:B,takeProfit:P,stopLoss:F,activeBlocks:N,totalActiveTpAndSl:R,sortedSymbols:d}=se(Q()),{addBlock:w,removeBlock:j,addOrder:$,removeOrder:O,calculateBuyOrder:G,calculateAmountMath:X,calculateSlPriceMath:M,calculateTpPriceMath:z,calculateSl:S,calculateTp:I}=Q(),g=(q,l)=>q.selectedSwitch===l?l==="sl"?"text-red-500":"text-green-500":"text-white";return(q,l)=>(h(),_("div",le,[t("div",ne,[t("div",oe,[t("div",ie,[t("label",ae,[l[7]||(l[7]=f("Deposit, $: ")),r(t("input",{id:"deposit",type:"number","onUpdate:modelValue":l[0]||(l[0]=n=>V(T)?T.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-right"},null,512),[[c,i(T)]])])]),t("div",ue,[t("label",re,[l[8]||(l[8]=f("Leverage: ")),r(t("input",{id:"leverage",type:"number","onUpdate:modelValue":l[1]||(l[1]=n=>V(y)?y.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[c,i(y)]])])]),t("div",de,[t("label",ce,[l[9]||(l[9]=f("CoefCost, %: ")),r(t("input",{id:"coefCost",type:"number","onUpdate:modelValue":l[2]||(l[2]=n=>V(B)?B.value=n:null),step:"1",min:"1",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[c,i(B)]])])])]),t("div",pe,[t("div",null,[t("label",me,[l[10]||(l[10]=f("RiskMargin: ")),r(t("input",{id:"coefRisk",type:"number","onUpdate:modelValue":l[3]||(l[3]=n=>V(b)?b.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[c,i(b)]])]),f(" "+p(i(U))+" $ ",1)]),t("div",null,[t("label",ye,[l[11]||(l[11]=f("TakeProfit: ")),r(t("input",{id:"takeProfit",type:"number","onUpdate:modelValue":l[4]||(l[4]=n=>V(P)?P.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[c,i(P)]])]),f(" "+p(i(D))+" $ ",1)]),t("div",null,[t("label",ve,[l[12]||(l[12]=f("StopLoss: ")),r(t("input",{id:"stopLoss",type:"number","onUpdate:modelValue":l[5]||(l[5]=n=>V(F)?F.value=n:null),step:"0.01",min:"0",required:"",class:"w-[6ch] bg-gray-900 text-yellow-400 font-bold text-center"},null,512),[[c,i(F)]])]),f(" "+p(i(L))+" $ ",1)])]),t("div",fe,[t("button",{onClick:l[6]||(l[6]=(...n)=>i(w)&&i(w)(...n)),class:"bg-gray-700 border px-1"},"ADD"),l[13]||(l[13]=t("div",{class:""},"TP",-1)),t("div",ge,p(i(R)),1)])]),l[17]||(l[17]=t("hr",{class:"border-green-600 mt-1"},null,-1)),t("div",xe,[t("div",be,[l[14]||(l[14]=t("div",{class:""},"Symbols:",-1)),t("ul",he,[(h(!0),_(H,null,J(i(d),n=>(h(),_("li",{key:n,class:"uppercase"},p(n)+" . ",1))),128))])]),l[15]||(l[15]=t("hr",{class:"border-green-600"},null,-1))]),(h(!0),_(H,null,J(i(N),n=>(h(),_("div",{key:n.id,class:"p-2 mt-1 text-sm"},[t("div",_e,[t("div",Pe,[r(t("input",{id:"symbol",type:"text","onUpdate:modelValue":s=>n.symbol=s,placeholder:"Symbol",class:"w-[10ch] px-2 text-yellow-400 text-center font-bold bg-gray-900 border border-gray-700 outline-none focus:bg-gray-800 focus:ring focus:ring-yellow-400 focus:border-yellow-400 invalid:bg-red-900 valid:bg-gray-800 uppercase"},null,8,we),[[c,n.symbol]]),r(t("input",{id:"open",type:"date","onUpdate:modelValue":s=>n.open=s,class:"w-[10ch] bg-gray-900 border text-center"},null,8,Se),[[c,n.open]]),r(t("input",{id:"close",type:"date","onUpdate:modelValue":s=>n.close=s,class:"w-[10ch] bg-gray-900 border text-center"},null,8,Ve),[[c,n.close]]),t("button",{id:"removeBlock",onClick:s=>i(j)(n.id),class:"border bg-gray-700 px-2"},"X Block",8,Ce),t("button",{id:"addOrder",onClick:s=>i($)(n),class:"px-2 bg-gray-700 border"}," Add ",8,Ue)]),(h(!0),_(H,null,J(n.orders,s=>(h(),_("div",{key:s.id,class:""},[t("div",Be,[t("span",null,p(s.id),1),r(t("input",{id:"buyPrice",type:"number","onUpdate:modelValue":a=>s.buyPrice=a,placeholder:"Buy Price",class:"w-[6ch] bg-gray-900 text-center"},null,8,Fe),[[c,s.buyPrice]]),r(t("input",{id:"amount",type:"number","onUpdate:modelValue":a=>s.amount=a,placeholder:"Amount",class:"w-[6ch] bg-gray-900 text-center"},null,8,Oe),[[c,s.amount]]),t("span",Me,p(i(G)(s)),1),t("div",Te,[t("span",null,"("+p(i(X)(s))+" - ",1),t("span",null,p(i(A))+")",1)]),t("button",{id:"removeOrder",onClick:a=>i(O)(n,s.id),class:"border px-2 bg-gray-400 font-bold text-red-600"},"X",8,Le)]),t("div",Ae,[t("div",$e,[r(t("input",{id:"sl",type:"radio",name:"switchGroup"+s.id,"onUpdate:modelValue":a=>s.selectedSwitch=a,value:"sl",class:"accent-red-600"},null,8,Ie),[[K,s.selectedSwitch]]),t("span",{class:C(g(s,"sl"))},"SL",2)]),r(t("input",{id:"slPrice",type:"number","onUpdate:modelValue":a=>s.slPrice=a,onInput:a=>s.sl=i(S)(s),placeholder:"SLprice",class:C(["w-[6ch] bg-gray-900 text-center",g(s,"sl")])},null,42,qe),[[c,s.slPrice]]),t("span",{class:C(g(s,"sl"))},p(i(S)(s)),3),t("div",De,[t("span",Ne,"("+p(i(M)(s))+")",1)]),t("div",Re,[r(t("input",{id:"tp",type:"radio",name:"switchGroup"+s.id,"onUpdate:modelValue":a=>s.selectedSwitch=a,value:"tp",class:"accent-green-600"},null,8,je),[[K,s.selectedSwitch]]),t("span",{class:C(g(s,"tp"))},"TP",2)]),r(t("input",{id:"tpPrice",type:"number","onUpdate:modelValue":a=>s.tpPrice=a,onInput:a=>s.tp=i(I)(s),placeholder:"TPprice",class:C(["w-[6ch] bg-gray-900 text-center",g(s,"tp")])},null,42,Ge),[[c,s.tpPrice]]),t("span",{class:C(g(s,"tp"))},p(i(I)(s)),3),t("div",Xe,[t("span",ze,"("+p(i(z)(s))+")",1)])])]))),128))]),l[16]||(l[16]=t("hr",{class:"border-green-600"},null,-1))]))),128))]))}};export{He as default};
