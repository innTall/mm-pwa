import{d as se,r as i,k as ve,c as p,o as g,a as O,b as t,h as w,g as F,i as h,u as f,l as z,t as A,F as T,s as ne,m as W,n as Q,p as Le,e as U,j as te}from"./index-CnYLW3HH.js";const le=se("gridStore",()=>{const m=i(0),n=i(0),o=i(0);ve(m,n);const u=p(()=>{let a=o.value;for(let l=2;l<=m.value;l++)a+=o.value*n.value**(l-1);return a.toFixed(2)});return{numOfOrder:m,coefNextOrderCost:n,firstOrderCost:o,gridCost:u}},{persist:!0}),Ce={class:"flex justify-between px-2 py-1 text-center"},$e={for:"numOfOrders"},Be={for:"firstOrderCost"},_e={for:"coefNextOrderCost"},Se={class:"flex gap-3"},we={class:"text-center font-bold"},Fe={__name:"GridCost",setup(m){const n=le(),{gridCost:o}=le();function u(a,l){}return(a,l)=>(g(),O(T,null,[l[10]||(l[10]=t("div",{class:"font-bold rounded-md px-2 text-blue-600"},"Grid Settings",-1)),t("div",Ce,[t("div",null,[t("label",$e,[l[6]||(l[6]=w("Orders: ")),F(t("input",{id:"numOfOrders",type:"number","onUpdate:modelValue":l[0]||(l[0]=d=>f(n).numOfOrder=d),step:"1",min:"1",required:"",class:"bg-gray-900 text-yellow-400 font-bold text-center",style:z({width:`${Math.max(f(n).numOfOrder.toString().length,1)}ch`}),onInput:l[1]||(l[1]=d=>void 0)},null,36),[[h,f(n).numOfOrder]])])]),t("div",null,[t("label",Be,[l[7]||(l[7]=w("Order: ")),F(t("input",{id:"firstOrderCost",type:"number","onUpdate:modelValue":l[2]||(l[2]=d=>f(n).firstOrderCost=d),step:"0.1",required:"",class:"bg-gray-900 text-yellow-400 font-bold text-center appearance-none",style:z({width:`${Math.max(f(n).firstOrderCost.toString().length,1)}ch`}),onInput:l[3]||(l[3]=d=>void 0)},null,36),[[h,f(n).firstOrderCost]])])]),t("div",null,[t("label",_e,[l[8]||(l[8]=w("Coef: ")),F(t("input",{id:"coefNextOrderCost",type:"number","onUpdate:modelValue":l[4]||(l[4]=d=>f(n).coefNextOrderCost=d),step:"0.1",required:"",class:"bg-gray-900 text-yellow-400 font-bold text-center appearance-none",style:z({width:`${Math.max(f(n).coefNextOrderCost.toString().length,1)}ch`}),onInput:l[5]||(l[5]=d=>void 0)},null,36),[[h,f(n).coefNextOrderCost]])])]),t("div",Se,[l[9]||(l[9]=t("div",{class:"font-bold"},"gridCost",-1)),t("div",we,A(f(o)),1)])]),l[11]||(l[11]=t("hr",{class:"border-green-600"},null,-1))],64))}},re=se("MinmaxStore",()=>{const m=i(1.2345),n=i(0),o=i(0),u=i(0),a=i(0),l=()=>{a.value=((Number(u.value/o.value-1)/2+(1-o.value/u.value)/2)/2*100).toFixed(1)};return ve(o,u),{minPrice:o,maxPrice:u,gridSize:a,firstBuyLevel:m,buyLevelsCoef:n,getProfit:l}},{persist:!0}),he={class:"w-full p-2"},Ne={class:"flex justify-between"},Me={for:"buyl"},Ae={for:"levc"},Pe={class:"flex pl-2 pr-2 text-center flex-row text-sm justify-around gap-2"},Te={class:""},ke={name:"min",class:""},Ve={class:""},De={name:"max",class:""},je={class:"flex gap-3"},Ue={__name:"PriceOptions",setup(m){const{minPrice:n,maxPrice:o,gridSize:u,firstBuyLevel:a,buyLevelsCoef:l}=ne(re()),{getProfit:d}=re(),$=p(()=>n.value>o.value?"bg-red-500":"bg-green-800"),N=p(()=>n.value>o.value?"bg-red-500":"bg-green-800");function D(c,s){}return(c,s)=>(g(),O(T,null,[t("div",he,[t("div",Ne,[t("label",Me,[s[6]||(s[6]=w("First Buy Level: ")),F(t("input",{id:"buyl",type:"number","onUpdate:modelValue":s[0]||(s[0]=b=>W(a)?a.value=b:null),step:"0.01",required:"",class:"w-1/4 bg-gray-900 text-yellow-400 font-bold",style:z({width:`${Math.max(f(a).toString().length,1)}ch`}),onInput:s[1]||(s[1]=b=>void 0)},null,36),[[h,f(a)]]),s[7]||(s[7]=w("% "))]),t("label",Ae,[s[8]||(s[8]=w("Buy Levels Coef: ")),F(t("input",{id:"levc",type:"number","onUpdate:modelValue":s[2]||(s[2]=b=>W(l)?l.value=b:null),step:"0.01",required:"",class:"w-1/4 bg-gray-900 text-yellow-400 font-bold",style:z({width:`${Math.max(f(l).toString().length,1)}ch`}),onInput:s[3]||(s[3]=b=>void 0)},null,36),[[h,f(l)]]),s[9]||(s[9]=w("% "))])]),t("div",Pe,[t("div",Te,[t("label",ke,[s[10]||(s[10]=w("Min: ")),F(t("input",{id:"min",type:"number",name:"min","onUpdate:modelValue":s[4]||(s[4]=b=>W(n)?n.value=b:null),step:"0.001",required:"",class:Q(`w-20 bg-green-800 text-center border rounded-md ${$.value}`)},null,2),[[h,f(n)]])])]),t("div",Ve,[t("label",De,[s[11]||(s[11]=w("Max: ")),F(t("input",{id:"max",type:"number",name:"max","onUpdate:modelValue":s[5]||(s[5]=b=>W(o)?o.value=b:null),step:"0.001",required:"",class:Q(`w-20 bg-green-800 text-center border rounded-md ${N.value}`)},null,2),[[h,f(o)]])])]),t("div",je,[s[12]||(s[12]=t("div",{class:""},"TP,%:",-1)),t("div",Le(f(d)(),{type:"number",class:"font-bold"}),A(f(u)),17)])])]),s[13]||(s[13]=t("hr",{class:"border-green-600"},null,-1))],64))}},{minPrice:V,maxPrice:H,gridSize:de,firstBuyLevel:qe,buyLevelsCoef:ze}=ne(re()),{numOfOrder:C,coefNextOrderCost:q,firstOrderCost:J}=ne(le()),Ie=se("table",()=>{let m=i([]),n=i([]),o=i([]),u=i([]),a=i([]),l=i([]),d=i([]),$=i([]),N=i([]);const D=i([]),c=p(()=>{const e=V.value;return e>=1e4?1:e>=1e3||e>=100?2:e>=10||e>=1?3:e>=.1?4:5}),s=p(()=>{const e=c.value;if(e==1)return 3;if(e==2)return 2;if(e==3)return 1;if(e>=4)return 0}),b=p(()=>(de.value/C.value).toFixed(2)),I=p(()=>Math.ceil(J.value*(1-q.value**C.value)/(1-q.value))),G=p(()=>(H.value-V.value-(H.value-V.value)*qe.value).toFixed(c.value)),L=p(()=>(H.value-G.value).toFixed(c.value)),B=p(()=>(V.value-V.value*b.value/100).toFixed(c.value)),X=p(()=>(H.value-V.value).toFixed(c.value)),R=p(()=>((B.value/L.value)**(1/(C.value-1))).toFixed(4));m=p(()=>Array.from({length:C.value},(e,r)=>r+1));const Z={3:{start:.95,end:1.05},4:{start:.9,end:1.1},5:{start:.85,end:1.15},6:{start:.8,end:1.2},7:{start:.75,end:1.25},8:{start:.7,end:1.3},9:{start:.65,end:1.35},10:{start:.6,end:1.4},11:{start:.55,end:1.45},12:{start:.5,end:1.5},13:{start:.45,end:1.55},14:{start:.4,end:1.6},15:{start:.35,end:1.65}};let _,y;if(C.value>=3&&C.value<=15){const e=Z[C.value];_=e.start,y=e.end}const x=((e,r=L.value,v=R.value)=>Array.from({length:Math.floor(Math.log(e/r)/Math.log(v))+2}).map((S,P)=>r*v**P))(B.value);let M=[],j;//! fixed bugs of number orders
x.length!==C.value?j=1:j=0;for(let e=j;e<x.length-1;e++)M[e]=(x[e]-x[e+1]).toFixed(c.value);let K=M.reverse();M.push();const oe=((e,r,v)=>Array.from({length:(r-e)/v+1},(S,P)=>(e+P*v).toFixed(2)))(_,y+.1,ze.value),ue=K.map(function(e,r){return(e*Number(oe[r])).toFixed(c.value)}),fe=ue,me=L.value;n=[];function ce(e){e.reduce((r,v,S)=>n[S]=(r-v).toFixed(c.value),me)}ce(fe),n.unshift(L.value);const Y=(J.value*q.value**C.value).toFixed(2);let E=((e,r=J.value,v=q.value)=>Array.from({length:Math.floor(Math.log(e/r)/Math.log(v))}).map((S,P)=>r*v**P))(Y);E=E.map(function(e){return Number(e.toFixed(2))});let ee;//! fixed bugs of number orders
E.length!==C.value?ee=1:ee=0,o=((e,r=J.value,v=q.value)=>Array.from({length:Math.floor(Math.log(e/r)/Math.log(v))+ee}).map((S,P)=>r*v**P))(Y),o=o.map(function(e){return Number((e*1.001).toFixed(2));//! * 1.001 ??
});const be=o;function ye(e){u=[],e.reduce((r,v,S)=>u[S]=r+v,0),u=u.map(function(r){return Number(r.toFixed(2))}),u.join(" ")}ye(be),a=o.map(function(e,r){return+(e/Number(n[r])).toFixed(s.value)});const pe=a;function xe(e){l=[],e.reduce((r,v,S)=>l[S]=r+v,0),l=l.map(function(r){return Number(r.toFixed(3))})}xe(pe),d=u.map(function(e,r){return+(e/l[r]).toFixed(c.value)});let ae=[];for(let e=0;e<C.value;e++)ae.push(d[e]*(de.value/100));$=d.map(function(e,r){return+(e+ae[r]).toFixed(c.value)});const ie=$.map(function(e,r){return(e*Number(l[r])).toFixed(2)});N=ie.map(function(e,r){return+(e-Number(u[r])).toFixed(2)});function ge(e,r){const v={date:e,symbol:r,data:{numOfOrderKeys:[...m.value],buyLimitLevels:[...n.value],buyOrdersArray:[...o.value],sumBuyOrders:[...u.value],amountBuyOrders:[...a.value],sumAmountOrders:[...l.value],buyZeroLevels:[...d.value],sellLevelsArray:[...$.value],totalProfit:[...N.value]}};D.value.push(v),m.value=[],n.value=[],o.value=[],u.value=[],a.value=[],l.value=[],d.value=[],$.value=[],N.value=[]}function Oe(e){D.value.splice(e,1)}return{gridFrequence:b,minGridDeposit:I,firstBuyLevelTicks:G,buyFirstLevel:L,tradeMinPrice:B,gridSizeTick:X,buyLevelsDiffCoef:R,numOfOrderKeys:m,baseBuyLevels:x,baseDiffDirect:M,baseDiffReverce:K,coefBuyLevelsArray:oe,finalDiffBuyLevels:ue,buyLimitLevels:n,buyOrderNext:Y,xBuyOrdersArray:E,buyOrdersArray:o,sumBuyOrders:u,amountBuyOrders:a,sumAmountOrders:l,buyZeroLevels:d,sellLevelsArray:$,totalSellOrders:ie,totalProfit:N,saveTable:ge,deleteTable:Oe}},{persist:!0}),Ge={class:"flex justify-between"},Re={class:"flex justify-between text-xs text-center gap-2"},Ze={class:"font-bold underline"},Ke={class:"flex justify-between items-center"},Ee={class:"font-bold"},We={class:"font-bold"},He=["onClick"],Je={class:"flex justify-between text-xs text-center gap-2 mt-2"},Qe={class:"font-bold underline"},Xe={__name:"GridTable",setup(m){const{numOfOrderKeys:n,buyLimitLevels:o,buyOrdersArray:u,sumBuyOrders:a,amountBuyOrders:l,sumAmountOrders:d,buyZeroLevels:$,sellLevelsArray:N,totalProfit:D,saveTable:c,deleteTable:s,savedTables:b}=Ie(),I=[{title:"N",class:""},{title:"Level",class:"text-green-400"},{title:"Amt",class:""},{title:"Sum",class:"font-bold"},{title:"Zero",class:"text-blue-400"},{title:"Sell",class:"text-red-400"},{title:"Buy",class:""},{title:"total",class:"font-bold"},{title:"TP",class:"bg-green-800"}],G=[n,o,l,d,$,N,u,a,D],L=i(null),B=i(""),X=()=>{if(!L.value||!B.value){alert("Please provide both date and symbol before saving.");return}c(L.value,B.value),L.value=null,B.value=""},R=Z=>{s(Z)};return(Z,_)=>(g(),O("div",null,[t("div",Ge,[F(t("input",{id:"'date",type:"date","onUpdate:modelValue":_[0]||(_[0]=y=>L.value=y),placeholder:"Date",class:"w-1/4 bg-gray-900 font-bold text-center"},null,512),[[h,L.value]]),F(t("input",{id:"'symbol",type:"text","onUpdate:modelValue":_[1]||(_[1]=y=>B.value=y),placeholder:"Symbol",class:"w-1/4 bg-gray-900 font-bold text-center"},null,512),[[h,B.value]]),t("button",{onClick:X,class:"bg-gray-900 p-1 border rounded-md"},"Save")]),t("div",Re,[(g(),O(T,null,U(I,(y,k)=>t("div",{key:k,class:Q("container "+y.class)},[t("p",Ze,A(y.title),1),(g(!0),O(T,null,U(G[k],(x,M)=>(g(),O("div",{key:M,class:""},A(x),1))),128))],2)),64))]),t("div",null,[_[2]||(_[2]=t("h2",{class:"text-lg font-bold mb-4"},"Saved Tables",-1)),(g(!0),O(T,null,U(f(b),(y,k)=>(g(),O("div",{key:k,class:"border p-4 mb-4"},[t("div",Ke,[t("div",null,[t("p",Ee,"Date: "+A(y.date),1),t("p",We,"Symbol: "+A(y.symbol),1)]),t("button",{onClick:x=>R(k),class:"text-red-400"},"Delete",8,He)]),t("div",Je,[(g(),O(T,null,U(I,(x,M)=>t("div",{key:M,class:Q("container "+x.class)},[t("p",Qe,A(x.title),1),(g(!0),O(T,null,U(y.data[x.title.toLowerCase()],(j,K)=>(g(),O("div",{key:K},A(j),1))),128))],2)),64))])]))),128))])]))}},Ye={class:""},st={__name:"GridOptions",setup(m){return(n,o)=>(g(),O("div",Ye,[te(Fe),te(Ue),te(Xe)]))}};export{st as default};
